!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Split=e()}(this,function(){"use strict";var N=window,L=N.document,z="addEventListener",D="removeEventListener",B="getBoundingClientRect",F="horizontal",P=function(){return!1},R=N.attachEvent&&!N[z],o=["","-webkit-","-moz-","-o-"].filter(function(t){var e=L.createElement("div");return e.style.cssText="width:"+t+"calc(9px)",!!e.style.length}).shift()+"calc",i=function(t){return"string"==typeof t||t instanceof String},H=function(t){if(i(t)){var e=L.querySelector(t);if(!e)throw new Error("Selector "+t+" did not match a DOM element");return e}return t},U=function(t,e,n){var r=t[e];return void 0!==r?r:n},G=function(t,e,n,r){if(e){if("end"===r)return 0;if("center"===r)return t/2}else if(n){if("start"===r)return 0;if("center"===r)return t/2}return t},J=function(t,e){var n=L.createElement("div");return n.className="gutter gutter-"+e,n},V=function(t,e,n){var r={};return i(e)?r[t]=e:r[t]=R?e+"%":o+"("+e+"% - "+n+"px)",r},$=function(t,e){var n;return(n={})[t]=e+"px",n};return function(t,c){void 0===c&&(c={});var u,e,o,i,n,l,f=t;Array.from&&(f=Array.from(f));var h=H(f[0]).parentNode,p=getComputedStyle?getComputedStyle(h).flexDirection:null,d=U(c,"sizes")||f.map(function(){return 100/f.length}),r=U(c,"minSize",100),g=Array.isArray(r)?r:f.map(function(){return r}),a=U(c,"expandToMin",!1),m=U(c,"gutterSize",10),v=U(c,"gutterAlign","center"),y=U(c,"snapOffset",30),b=U(c,"dragInterval",1),w=U(c,"direction",F),x=U(c,"cursor",w===F?"col-resize":"row-resize"),_=U(c,"gutter",J),s=U(c,"elementStyle",V),k=U(c,"gutterStyle",$);function C(e,t,n,r){var o=s(u,t,n,r);Object.keys(o).forEach(function(t){e.style[t]=o[t]})}function j(){return l.map(function(t){return t.size})}function E(t){return"touches"in t?t.touches[0][e]:t[e]}function S(t){var e=l[this.a],n=l[this.b],r=e.size+n.size;e.size=t/this.size*r,n.size=r-t/this.size*r,C(e.element,e.size,this._b,e.i),C(n.element,n.size,this._c,n.i)}function O(){var t=l[this.a].element,e=l[this.b].element,n=t[B](),r=e[B]();this.size=n[u]+r[u]+this._b+this._c,this.start=n[o],this.end=n[i]}function q(i){var a=function(t){if(!getComputedStyle)return null;var e=getComputedStyle(t);return t[n]-(w===F?parseFloat(e.paddingLeft)+parseFloat(e.paddingRight):parseFloat(e.paddingTop)+parseFloat(e.paddingBottom))}(h);if(null===a)return i;var s=0,c=[],t=i.map(function(t,e){var n=a*t/100,r=G(m,0===e,e===i.length-1,v),o=g[e]+r;return n<o?(s+=o-n,c.push(0),o):(c.push(n-o),n)});return 0===s?i:t.map(function(t,e){var n=t;if(0<s&&0<c[e]-s){var r=Math.min(s,c[e]-s);s-=r,n=t-r}return n/a*100})}w===F?(u="width",e="clientX",o="left",i="right",n="clientWidth"):"vertical"===w&&(u="height",e="clientY",o="top",i="bottom",n="clientHeight"),d=q(d);var M=[];function A(t){var e=t.i===M.length,n=e?M[t.i-1]:M[t.i];O.call(n);var r=e?n.size-t.minSize-n._c:t.minSize+n._b;S.call(n,r)}function T(t){var i=q(t);i.forEach(function(t,e){if(0<e){var n=M[e-1],r=l[n.a],o=l[n.b];r.size=i[e-1],o.size=t,C(r.element,r.size,n._b),C(o.element,o.size,n._c)}})}function I(n,r){M.forEach(function(e){if(!0!==r?e.parent.removeChild(e.gutter):(e.gutter[D]("mousedown",e._a),e.gutter[D]("touchstart",e._a)),!0!==n){var t=s(u,e.a.size,e._b);Object.keys(t).forEach(function(t){l[e.a].element.style[t]="",l[e.b].element.style[t]=""})}})}return(l=f.map(function(t,e){var n,r,o,i={element:H(t),size:d[e],minSize:g[e],i:e};if(0<e&&((n={a:e-1,b:e,dragging:!1,direction:w,parent:h})._b=G(m,e-1==0,!1,v),n._c=G(m,!1,e===f.length-1,v),"row-reverse"===p||"column-reverse"===p)){var a=n.a;n.a=n.b,n.b=a}if(!R&&0<e){var s=_(e,w,i.element);r=s,o=k(u,m,e),Object.keys(o).forEach(function(t){r.style[t]=o[t]}),n._a=function(t){if(!("button"in t&&0!==t.button)){var e=this,n=l[e.a].element,r=l[e.b].element;e.dragging||U(c,"onDragStart",P)(j()),t.preventDefault(),e.dragging=!0,e.move=function(t){var e,n=l[this.a],r=l[this.b];this.dragging&&(e=E(t)-this.start+(this._b-this.dragOffset),1<b&&(e=Math.round(e/b)*b),e<=n.minSize+y+this._b?e=n.minSize+this._b:e>=this.size-(r.minSize+y+this._c)&&(e=this.size-(r.minSize+this._c)),S.call(this,e),U(c,"onDrag",P)())}.bind(e),e.stop=function(){var t=this,e=l[t.a].element,n=l[t.b].element;t.dragging&&U(c,"onDragEnd",P)(j()),t.dragging=!1,N[D]("mouseup",t.stop),N[D]("touchend",t.stop),N[D]("touchcancel",t.stop),N[D]("mousemove",t.move),N[D]("touchmove",t.move),t.stop=null,t.move=null,e[D]("selectstart",P),e[D]("dragstart",P),n[D]("selectstart",P),n[D]("dragstart",P),e.style.userSelect="",e.style.webkitUserSelect="",e.style.MozUserSelect="",e.style.pointerEvents="",n.style.userSelect="",n.style.webkitUserSelect="",n.style.MozUserSelect="",n.style.pointerEvents="",t.gutter.style.cursor="",t.parent.style.cursor="",L.body.style.cursor=""}.bind(e),N[z]("mouseup",e.stop),N[z]("touchend",e.stop),N[z]("touchcancel",e.stop),N[z]("mousemove",e.move),N[z]("touchmove",e.move),n[z]("selectstart",P),n[z]("dragstart",P),r[z]("selectstart",P),r[z]("dragstart",P),n.style.userSelect="none",n.style.webkitUserSelect="none",n.style.MozUserSelect="none",n.style.pointerEvents="none",r.style.userSelect="none",r.style.webkitUserSelect="none",r.style.MozUserSelect="none",r.style.pointerEvents="none",e.gutter.style.cursor=x,e.parent.style.cursor=x,L.body.style.cursor=x,O.call(e),e.dragOffset=E(t)-e.end}}.bind(n),s[z]("mousedown",n._a),s[z]("touchstart",n._a),h.insertBefore(s,i.element),n.gutter=s}return C(i.element,i.size,G(m,0===e,e===f.length-1,v)),0<e&&M.push(n),i})).forEach(function(t){var e=t.element[B]()[u];e<t.minSize&&(a?A(t):t.minSize=e)}),R?{setSizes:T,destroy:I}:{setSizes:T,getSizes:j,collapse:function(t){A(l[t])},destroy:I,parent:h,pairs:M}}}),function(n){var r={};function o(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}o.m=n,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=9)}([function(t,e,n){t.exports=n(10)},function(t,e){function c(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}t.exports=function(s){return function(){var t=this,a=arguments;return new Promise(function(e,n){var r=s.apply(t,a);function o(t){c(r,e,n,o,i,"next",t)}function i(t){c(r,e,n,o,i,"throw",t)}o(void 0)})}}},function(t,e,n){var r=n(12),o=n(13),i=n(14);t.exports=function(t,e){return r(t)||o(t,e)||i()}},function(t,e,n){var o=n(15);t.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}return e}},function(t,e,n){var r,o;function b(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}function w(t){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}b.prototype.diff_main=function(t,e,n,r){void 0===r&&(r=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var o=r;if(null==t||null==e)throw new Error("Null input. (diff_main)");if(t==e)return t?[[0,t]]:[];void 0===n&&(n=!0);var i=n,a=this.diff_commonPrefix(t,e),s=t.substring(0,a);t=t.substring(a),e=e.substring(a),a=this.diff_commonSuffix(t,e);var c=t.substring(t.length-a);t=t.substring(0,t.length-a),e=e.substring(0,e.length-a);var u=this.diff_compute_(t,e,i,o);return s&&u.unshift([0,s]),c&&u.push([0,c]),this.diff_cleanupMerge(u),u},b.prototype.diff_compute_=function(t,e,n,r){var o;if(!t)return[[1,e]];if(!e)return[[-1,t]];var i=t.length>e.length?t:e,a=t.length>e.length?e:t,s=i.indexOf(a);if(-1!=s)return o=[[1,i.substring(0,s)],[0,a],[1,i.substring(s+a.length)]],t.length>e.length&&(o[0][0]=o[2][0]=-1),o;if(1==a.length)return[[-1,t],[1,e]];var c=this.diff_halfMatch_(t,e);if(c){var u=c[0],l=c[1],f=c[2],h=c[3],p=c[4],d=this.diff_main(u,f,n,r),g=this.diff_main(l,h,n,r);return d.concat([[0,p]],g)}return n&&100<t.length&&100<e.length?this.diff_lineMode_(t,e,r):this.diff_bisect_(t,e,r)},b.prototype.diff_lineMode_=function(t,e,n){t=(l=this.diff_linesToChars_(t,e)).chars1,e=l.chars2;var r=l.lineArray,o=this.diff_main(t,e,!1,n);this.diff_charsToLines_(o,r),this.diff_cleanupSemantic(o),o.push([0,""]);for(var i=0,a=0,s=0,c="",u="";i<o.length;){switch(o[i][0]){case 1:s++,u+=o[i][1];break;case-1:a++,c+=o[i][1];break;case 0:if(1<=a&&1<=s){o.splice(i-a-s,a+s),i=i-a-s;for(var l,f=(l=this.diff_main(c,u,!1,n)).length-1;0<=f;f--)o.splice(i,0,l[f]);i+=l.length}a=s=0,u=c=""}i++}return o.pop(),o},b.prototype.diff_bisect_=function(t,e,n){for(var r=t.length,o=e.length,i=Math.ceil((r+o)/2),a=i,s=2*i,c=new Array(s),u=new Array(s),l=0;l<s;l++)c[l]=-1,u[l]=-1;c[a+1]=0;for(var f=r-o,h=f%2!=(u[a+1]=0),p=0,d=0,g=0,m=0,v=0;v<i&&!((new Date).getTime()>n);v++){for(var y=-v+p;y<=v-d;y+=2){for(var b=a+y,w=(j=y==-v||y!=v&&c[b-1]<c[b+1]?c[b+1]:c[b-1]+1)-y;j<r&&w<o&&t.charAt(j)==e.charAt(w);)j++,w++;if(r<(c[b]=j))d+=2;else if(o<w)p+=2;else if(h&&0<=(k=a+f-y)&&k<s&&-1!=u[k]&&(_=r-u[k])<=j)return this.diff_bisectSplit_(t,e,j,w,n)}for(var x=-v+g;x<=v-m;x+=2){for(var _,k=a+x,C=(_=x==-v||x!=v&&u[k-1]<u[k+1]?u[k+1]:u[k-1]+1)-x;_<r&&C<o&&t.charAt(r-_-1)==e.charAt(o-C-1);)_++,C++;if(r<(u[k]=_))m+=2;else if(o<C)g+=2;else if(!h){var j;if(0<=(b=a+f-x)&&b<s&&-1!=c[b]&&(w=a+(j=c[b])-b,(_=r-_)<=j))return this.diff_bisectSplit_(t,e,j,w,n)}}}return[[-1,t],[1,e]]},b.prototype.diff_bisectSplit_=function(t,e,n,r,o){var i=t.substring(0,n),a=e.substring(0,r),s=t.substring(n),c=e.substring(r),u=this.diff_main(i,a,!1,o),l=this.diff_main(s,c,!1,o);return u.concat(l)},b.prototype.diff_linesToChars_=function(t,e){var a=[],s={};function n(t){for(var e="",n=0,r=-1,o=a.length;r<t.length-1;){-1==(r=t.indexOf("\n",n))&&(r=t.length-1);var i=t.substring(n,r+1);n=r+1,(s.hasOwnProperty?s.hasOwnProperty(i):void 0!==s[i])?e+=String.fromCharCode(s[i]):(e+=String.fromCharCode(o),s[i]=o,a[o++]=i)}return e}return a[0]="",{chars1:n(t),chars2:n(e),lineArray:a}},b.prototype.diff_charsToLines_=function(t,e){for(var n=0;n<t.length;n++){for(var r=t[n][1],o=[],i=0;i<r.length;i++)o[i]=e[r.charCodeAt(i)];t[n][1]=o.join("")}},b.prototype.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,r=Math.min(t.length,e.length),o=r,i=0;n<o;)t.substring(i,o)==e.substring(i,o)?i=n=o:r=o,o=Math.floor((r-n)/2+n);return o},b.prototype.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,r=Math.min(t.length,e.length),o=r,i=0;n<o;)t.substring(t.length-o,t.length-i)==e.substring(e.length-o,e.length-i)?i=n=o:r=o,o=Math.floor((r-n)/2+n);return o},b.prototype.diff_commonOverlap_=function(t,e){var n=t.length,r=e.length;if(0==n||0==r)return 0;r<n?t=t.substring(n-r):n<r&&(e=e.substring(0,n));var o=Math.min(n,r);if(t==e)return o;for(var i=0,a=1;;){var s=t.substring(o-a),c=e.indexOf(s);if(-1==c)return i;a+=c,0!=c&&t.substring(o-a)!=e.substring(0,a)||(i=a,a++)}},b.prototype.diff_halfMatch_=function(t,e){if(this.Diff_Timeout<=0)return null;var n=t.length>e.length?t:e,r=t.length>e.length?e:t;if(n.length<4||2*r.length<n.length)return null;var h=this;function o(t,e,n){for(var r,o,i,a,s=t.substring(n,n+Math.floor(t.length/4)),c=-1,u="";-1!=(c=e.indexOf(s,c+1));){var l=h.diff_commonPrefix(t.substring(n),e.substring(c)),f=h.diff_commonSuffix(t.substring(0,n),e.substring(0,c));u.length<f+l&&(u=e.substring(c-f,c)+e.substring(c,c+l),r=t.substring(0,n-f),o=t.substring(n+l),i=e.substring(0,c-f),a=e.substring(c+l))}return 2*u.length>=t.length?[r,o,i,a,u]:null}var i,a,s,c,u,l=o(n,r,Math.ceil(n.length/4)),f=o(n,r,Math.ceil(n.length/2));return l||f?(i=f?l&&l[4].length>f[4].length?l:f:l,t.length>e.length?(a=i[0],s=i[1],c=i[2],u=i[3]):(c=i[0],u=i[1],a=i[2],s=i[3]),[a,s,c,u,i[4]]):null},b.prototype.diff_cleanupSemantic=function(t){for(var e=!1,n=[],r=0,o=null,i=0,a=0,s=0,c=0,u=0;i<t.length;)0==t[i][0]?(a=c,s=u,u=c=0,o=t[n[r++]=i][1]):(1==t[i][0]?c+=t[i][1].length:u+=t[i][1].length,o&&o.length<=Math.max(a,s)&&o.length<=Math.max(c,u)&&(t.splice(n[r-1],0,[-1,o]),t[n[r-1]+1][0]=1,r--,i=0<--r?n[r-1]:-1,u=c=s=a=0,e=!(o=null))),i++;for(e&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),i=1;i<t.length;){if(-1==t[i-1][0]&&1==t[i][0]){var l=t[i-1][1],f=t[i][1],h=this.diff_commonOverlap_(l,f),p=this.diff_commonOverlap_(f,l);p<=h?(h>=l.length/2||h>=f.length/2)&&(t.splice(i,0,[0,f.substring(0,h)]),t[i-1][1]=l.substring(0,l.length-h),t[i+1][1]=f.substring(h),i++):(p>=l.length/2||p>=f.length/2)&&(t.splice(i,0,[0,l.substring(0,p)]),t[i-1][0]=1,t[i-1][1]=f.substring(0,f.length-p),t[i+1][0]=-1,t[i+1][1]=l.substring(p),i++),i++}i++}},b.prototype.diff_cleanupSemanticLossless=function(t){function e(t,e){if(!t||!e)return 6;var n=t.charAt(t.length-1),r=e.charAt(0),o=n.match(b.nonAlphaNumericRegex_),i=r.match(b.nonAlphaNumericRegex_),a=o&&n.match(b.whitespaceRegex_),s=i&&r.match(b.whitespaceRegex_),c=a&&n.match(b.linebreakRegex_),u=s&&r.match(b.linebreakRegex_),l=c&&t.match(b.blanklineEndRegex_),f=u&&e.match(b.blanklineStartRegex_);return l||f?5:c||u?4:o&&!a&&s?3:a||s?2:o||i?1:0}for(var n=1;n<t.length-1;){if(0==t[n-1][0]&&0==t[n+1][0]){var r=t[n-1][1],o=t[n][1],i=t[n+1][1],a=this.diff_commonSuffix(r,o);if(a){var s=o.substring(o.length-a);r=r.substring(0,r.length-a),o=s+o.substring(0,o.length-a),i=s+i}for(var c=r,u=o,l=i,f=e(r,o)+e(o,i);o.charAt(0)===i.charAt(0);){r+=o.charAt(0),o=o.substring(1)+i.charAt(0),i=i.substring(1);var h=e(r,o)+e(o,i);f<=h&&(f=h,c=r,u=o,l=i)}t[n-1][1]!=c&&(c?t[n-1][1]=c:(t.splice(n-1,1),n--),t[n][1]=u,l?t[n+1][1]=l:(t.splice(n+1,1),n--))}n++}},b.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,b.whitespaceRegex_=/\s/,b.linebreakRegex_=/[\r\n]/,b.blanklineEndRegex_=/\n\r?\n$/,b.blanklineStartRegex_=/^\r?\n\r?\n/,b.prototype.diff_cleanupEfficiency=function(t){for(var e=!1,n=[],r=0,o=null,i=0,a=!1,s=!1,c=!1,u=!1;i<t.length;)0==t[i][0]?(o=t[i][1].length<this.Diff_EditCost&&(c||u)?(a=c,s=u,t[n[r++]=i][1]):(r=0,null),c=u=!1):(-1==t[i][0]?u=!0:c=!0,o&&(a&&s&&c&&u||o.length<this.Diff_EditCost/2&&a+s+c+u==3)&&(t.splice(n[r-1],0,[-1,o]),t[n[r-1]+1][0]=1,r--,o=null,a&&s?(c=u=!0,r=0):(i=0<--r?n[r-1]:-1,c=u=!1),e=!0)),i++;e&&this.diff_cleanupMerge(t)},b.prototype.diff_cleanupMerge=function(t){t.push([0,""]);for(var e,n=0,r=0,o=0,i="",a="";n<t.length;)switch(t[n][0]){case 1:o++,a+=t[n][1],n++;break;case-1:r++,i+=t[n][1],n++;break;case 0:1<r+o?(0!==r&&0!==o&&(0!==(e=this.diff_commonPrefix(a,i))&&(0<n-r-o&&0==t[n-r-o-1][0]?t[n-r-o-1][1]+=a.substring(0,e):(t.splice(0,0,[0,a.substring(0,e)]),n++),a=a.substring(e),i=i.substring(e)),0!==(e=this.diff_commonSuffix(a,i))&&(t[n][1]=a.substring(a.length-e)+t[n][1],a=a.substring(0,a.length-e),i=i.substring(0,i.length-e))),0===r?t.splice(n-o,r+o,[1,a]):0===o?t.splice(n-r,r+o,[-1,i]):t.splice(n-r-o,r+o,[-1,i],[1,a]),n=n-r-o+(r?1:0)+(o?1:0)+1):0!==n&&0==t[n-1][0]?(t[n-1][1]+=t[n][1],t.splice(n,1)):n++,r=o=0,a=i=""}""===t[t.length-1][1]&&t.pop();var s=!1;for(n=1;n<t.length-1;)0==t[n-1][0]&&0==t[n+1][0]&&(t[n][1].substring(t[n][1].length-t[n-1][1].length)==t[n-1][1]?(t[n][1]=t[n-1][1]+t[n][1].substring(0,t[n][1].length-t[n-1][1].length),t[n+1][1]=t[n-1][1]+t[n+1][1],t.splice(n-1,1),s=!0):t[n][1].substring(0,t[n+1][1].length)==t[n+1][1]&&(t[n-1][1]+=t[n+1][1],t[n][1]=t[n][1].substring(t[n+1][1].length)+t[n+1][1],t.splice(n+1,1),s=!0)),n++;s&&this.diff_cleanupMerge(t)},b.prototype.diff_xIndex=function(t,e){var n,r=0,o=0,i=0,a=0;for(n=0;n<t.length&&(1!==t[n][0]&&(r+=t[n][1].length),-1!==t[n][0]&&(o+=t[n][1].length),!(e<r));n++)i=r,a=o;return t.length!=n&&-1===t[n][0]?a:a+(e-i)},b.prototype.diff_prettyHtml=function(t){for(var e=[],n=/&/g,r=/</g,o=/>/g,i=/\n/g,a=0;a<t.length;a++){var s=t[a][0],c=t[a][1].replace(n,"&amp;").replace(r,"&lt;").replace(o,"&gt;").replace(i,"&para;<br>");switch(s){case 1:e[a]='<ins style="background:#e6ffe6;">'+c+"</ins>";break;case-1:e[a]='<del style="background:#ffe6e6;">'+c+"</del>";break;case 0:e[a]="<span>"+c+"</span>"}}return e.join("")},b.prototype.diff_text1=function(t){for(var e=[],n=0;n<t.length;n++)1!==t[n][0]&&(e[n]=t[n][1]);return e.join("")},b.prototype.diff_text2=function(t){for(var e=[],n=0;n<t.length;n++)-1!==t[n][0]&&(e[n]=t[n][1]);return e.join("")},b.prototype.diff_levenshtein=function(t){for(var e=0,n=0,r=0,o=0;o<t.length;o++){var i=t[o][0],a=t[o][1];switch(i){case 1:n+=a.length;break;case-1:r+=a.length;break;case 0:e+=Math.max(n,r),r=n=0}}return e+Math.max(n,r)},b.prototype.diff_toDelta=function(t){for(var e=[],n=0;n<t.length;n++)switch(t[n][0]){case 1:e[n]="+"+encodeURI(t[n][1]);break;case-1:e[n]="-"+t[n][1].length;break;case 0:e[n]="="+t[n][1].length}return e.join("\t").replace(/%20/g," ")},b.prototype.diff_fromDelta=function(t,e){for(var n=[],r=0,o=0,i=e.split(/\t/g),a=0;a<i.length;a++){var s=i[a].substring(1);switch(i[a].charAt(0)){case"+":try{n[r++]=[1,decodeURI(s)]}catch(t){throw new Error("Illegal escape in diff_fromDelta: "+s)}break;case"-":case"=":var c=parseInt(s,10);if(isNaN(c)||c<0)throw new Error("Invalid number in diff_fromDelta: "+s);var u=t.substring(o,o+=c);"="==i[a].charAt(0)?n[r++]=[0,u]:n[r++]=[-1,u];break;default:if(i[a])throw new Error("Invalid diff operation in diff_fromDelta: "+i[a])}}if(o!=t.length)throw new Error("Delta length ("+o+") does not equal source text length ("+t.length+").");return n},b.prototype.match_main=function(t,e,n){if(null==t||null==e||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,t.length)),t==e?0:t.length?t.substring(n,n+e.length)==e?n:this.match_bitap_(t,e,n):-1},b.prototype.match_bitap_=function(t,o,i){if(o.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var e=this.match_alphabet_(o),a=this;function n(t,e){var n=t/o.length,r=Math.abs(i-e);return a.Match_Distance?n+r/a.Match_Distance:r?1:n}var r=this.Match_Threshold,s=t.indexOf(o,i);-1!=s&&(r=Math.min(n(0,s),r),-1!=(s=t.lastIndexOf(o,i+o.length))&&(r=Math.min(n(0,s),r)));var c,u,l=1<<o.length-1;s=-1;for(var f,h=o.length+t.length,p=0;p<o.length;p++){for(c=0,u=h;c<u;)n(p,i+u)<=r?c=u:h=u,u=Math.floor((h-c)/2+c);h=u;var d=Math.max(1,i-u+1),g=Math.min(i+u,t.length)+o.length,m=Array(g+2);m[g+1]=(1<<p)-1;for(var v=g;d<=v;v--){var y=e[t.charAt(v-1)];if(m[v]=0===p?(m[v+1]<<1|1)&y:(m[v+1]<<1|1)&y|(f[v+1]|f[v])<<1|1|f[v+1],m[v]&l){var b=n(p,v-1);if(b<=r){if(r=b,!(i<(s=v-1)))break;d=Math.max(1,2*i-s)}}}if(n(p+1,i)>r)break;f=m}return s},b.prototype.match_alphabet_=function(t){for(var e={},n=0;n<t.length;n++)e[t.charAt(n)]=0;for(n=0;n<t.length;n++)e[t.charAt(n)]|=1<<t.length-n-1;return e},b.prototype.patch_addContext_=function(t,e){if(0!=e.length){for(var n=e.substring(t.start2,t.start2+t.length1),r=0;e.indexOf(n)!=e.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)r+=this.Patch_Margin,n=e.substring(t.start2-r,t.start2+t.length1+r);r+=this.Patch_Margin;var o=e.substring(t.start2-r,t.start2);o&&t.diffs.unshift([0,o]);var i=e.substring(t.start2+t.length1,t.start2+t.length1+r);i&&t.diffs.push([0,i]),t.start1-=o.length,t.start2-=o.length,t.length1+=o.length+i.length,t.length2+=o.length+i.length}},b.prototype.patch_make=function(t,e,n){var r,o;if("string"==typeof t&&"string"==typeof e&&void 0===n)r=t,2<(o=this.diff_main(r,e,!0)).length&&(this.diff_cleanupSemantic(o),this.diff_cleanupEfficiency(o));else if(t&&"object"==typeof t&&void 0===e&&void 0===n)o=t,r=this.diff_text1(o);else if("string"==typeof t&&e&&"object"==typeof e&&void 0===n)r=t,o=e;else{if("string"!=typeof t||"string"!=typeof e||!n||"object"!=typeof n)throw new Error("Unknown call format to patch_make.");r=t,o=n}if(0===o.length)return[];for(var i=[],a=new b.patch_obj,s=0,c=0,u=0,l=r,f=r,h=0;h<o.length;h++){var p=o[h][0],d=o[h][1];switch(s||0===p||(a.start1=c,a.start2=u),p){case 1:a.diffs[s++]=o[h],a.length2+=d.length,f=f.substring(0,u)+d+f.substring(u);break;case-1:a.length1+=d.length,a.diffs[s++]=o[h],f=f.substring(0,u)+f.substring(u+d.length);break;case 0:d.length<=2*this.Patch_Margin&&s&&o.length!=h+1?(a.diffs[s++]=o[h],a.length1+=d.length,a.length2+=d.length):d.length>=2*this.Patch_Margin&&s&&(this.patch_addContext_(a,l),i.push(a),a=new b.patch_obj,s=0,l=f,c=u)}1!==p&&(c+=d.length),-1!==p&&(u+=d.length)}return s&&(this.patch_addContext_(a,l),i.push(a)),i},b.prototype.patch_deepCopy=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n],o=new b.patch_obj;o.diffs=[];for(var i=0;i<r.diffs.length;i++)o.diffs[i]=r.diffs[i].slice();o.start1=r.start1,o.start2=r.start2,o.length1=r.length1,o.length2=r.length2,e[n]=o}return e},b.prototype.patch_apply=function(t,e){if(0==t.length)return[e,[]];t=this.patch_deepCopy(t);var n=this.patch_addPadding(t);e=n+e+n,this.patch_splitMax(t);for(var r=0,o=[],i=0;i<t.length;i++){var a,s,c=t[i].start2+r,u=this.diff_text1(t[i].diffs),l=-1;if(u.length>this.Match_MaxBits?-1!=(a=this.match_main(e,u.substring(0,this.Match_MaxBits),c))&&(-1==(l=this.match_main(e,u.substring(u.length-this.Match_MaxBits),c+u.length-this.Match_MaxBits))||l<=a)&&(a=-1):a=this.match_main(e,u,c),-1==a)o[i]=!1,r-=t[i].length2-t[i].length1;else if(o[i]=!0,r=a-c,u==(s=-1==l?e.substring(a,a+u.length):e.substring(a,l+this.Match_MaxBits)))e=e.substring(0,a)+this.diff_text2(t[i].diffs)+e.substring(a+u.length);else{var f=this.diff_main(u,s,!1);if(u.length>this.Match_MaxBits&&this.diff_levenshtein(f)/u.length>this.Patch_DeleteThreshold)o[i]=!1;else{this.diff_cleanupSemanticLossless(f);for(var h,p=0,d=0;d<t[i].diffs.length;d++){var g=t[i].diffs[d];0!==g[0]&&(h=this.diff_xIndex(f,p)),1===g[0]?e=e.substring(0,a+h)+g[1]+e.substring(a+h):-1===g[0]&&(e=e.substring(0,a+h)+e.substring(a+this.diff_xIndex(f,p+g[1].length))),-1!==g[0]&&(p+=g[1].length)}}}}return[e=e.substring(n.length,e.length-n.length),o]},b.prototype.patch_addPadding=function(t){for(var e=this.Patch_Margin,n="",r=1;r<=e;r++)n+=String.fromCharCode(r);for(r=0;r<t.length;r++)t[r].start1+=e,t[r].start2+=e;var o=t[0],i=o.diffs;if(0==i.length||0!=i[0][0])i.unshift([0,n]),o.start1-=e,o.start2-=e,o.length1+=e,o.length2+=e;else if(e>i[0][1].length){var a=e-i[0][1].length;i[0][1]=n.substring(i[0][1].length)+i[0][1],o.start1-=a,o.start2-=a,o.length1+=a,o.length2+=a}return 0==(i=(o=t[t.length-1]).diffs).length||0!=i[i.length-1][0]?(i.push([0,n]),o.length1+=e,o.length2+=e):e>i[i.length-1][1].length&&(a=e-i[i.length-1][1].length,i[i.length-1][1]+=n.substring(0,a),o.length1+=a,o.length2+=a),n},b.prototype.patch_splitMax=function(t){for(var e=this.Match_MaxBits,n=0;n<t.length;n++)if(!(t[n].length1<=e)){var r=t[n];t.splice(n--,1);for(var o=r.start1,i=r.start2,a="";0!==r.diffs.length;){var s=new b.patch_obj,c=!0;for(s.start1=o-a.length,s.start2=i-a.length,""!==a&&(s.length1=s.length2=a.length,s.diffs.push([0,a]));0!==r.diffs.length&&s.length1<e-this.Patch_Margin;){var u=r.diffs[0][0],l=r.diffs[0][1];1===u?(s.length2+=l.length,i+=l.length,s.diffs.push(r.diffs.shift()),c=!1):-1===u&&1==s.diffs.length&&0==s.diffs[0][0]&&l.length>2*e?(s.length1+=l.length,o+=l.length,c=!1,s.diffs.push([u,l]),r.diffs.shift()):(l=l.substring(0,e-s.length1-this.Patch_Margin),s.length1+=l.length,o+=l.length,0===u?(s.length2+=l.length,i+=l.length):c=!1,s.diffs.push([u,l]),l==r.diffs[0][1]?r.diffs.shift():r.diffs[0][1]=r.diffs[0][1].substring(l.length))}a=(a=this.diff_text2(s.diffs)).substring(a.length-this.Patch_Margin);var f=this.diff_text1(r.diffs).substring(0,this.Patch_Margin);""!==f&&(s.length1+=f.length,s.length2+=f.length,0!==s.diffs.length&&0===s.diffs[s.diffs.length-1][0]?s.diffs[s.diffs.length-1][1]+=f:s.diffs.push([0,f])),c||t.splice(++n,0,s)}}},b.prototype.patch_toText=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=t[n];return e.join("")},b.prototype.patch_fromText=function(t){var e=[];if(!t)return e;for(var n=t.split("\n"),r=0,o=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;r<n.length;){var i=n[r].match(o);if(!i)throw new Error("Invalid patch string: "+n[r]);var a=new b.patch_obj;for(e.push(a),a.start1=parseInt(i[1],10),""===i[2]?(a.start1--,a.length1=1):"0"==i[2]?a.length1=0:(a.start1--,a.length1=parseInt(i[2],10)),a.start2=parseInt(i[3],10),""===i[4]?(a.start2--,a.length2=1):"0"==i[4]?a.length2=0:(a.start2--,a.length2=parseInt(i[4],10)),r++;r<n.length;){var s=n[r].charAt(0);try{var c=n[r].substring(1)}catch(t){throw new Error("Illegal escape in patch_fromText: "+c)}if("-"==s)a.diffs.push([-1,c]);else if("+"==s)a.diffs.push([1,c]);else if(" "==s)a.diffs.push([0,c]);else{if("@"==s)break;if(""!==s)throw new Error('Invalid patch mode "'+s+'" in: '+c)}r++}}return e},(b.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0}).prototype.toString=function(){for(var t,e=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],n=0;n<this.diffs.length;n++){switch(this.diffs[n][0]){case 1:t="+";break;case-1:t="-";break;case 0:t=" "}e[n+1]=t+encodeURI(this.diffs[n][1])+"\n"}return e.join("").replace(/%20/g," ")},t.exports=b,t.exports.diff_match_patch=b,t.exports.DIFF_DELETE=-1,t.exports.DIFF_INSERT=1,t.exports.DIFF_EQUAL=0,"undefined"!=typeof self&&self,void 0===(o="function"==typeof(r=function(){return function(){var t,n=[],c={ON_CHANGE:"s",ON_ADD:"a",ON_COMMIT:"c",ON_CHECKOUT:"co"},u={i:0,commits:{},stage:[],working:[],head:null},s=function(){return t||(t=new b)},l=function(t){return JSON.parse(JSON.stringify(t))},f=function(t){return JSON.stringify(t)},h=function(t){return JSON.parse(t)},p=function(){var i=c.log(),a={};return Object.keys(i).forEach(function t(e){if(a[e])return a[e];var n,r,o;null===i[e].parent?a[e]=i[e].files:a[e]=(n=t(i[e].parent),r=i[e].files,(o=s()).patch_apply(o.patch_fromText(r),n).shift())}),a},r=function(t){var e=p();if(!e[t])throw new Error("There is no commit with hash "+t);return e[t]},o=function(t,e){var n=s(),r=n.diff_main(t,e,!0);return 2<r.length&&n.diff_cleanupSemantic(r),n.patch_toText(n.patch_make(t,e,r))},i=function(t,e){return decodeURI(o(r(e),t))},d=function(e){return n.forEach(function(t){return t(e)})},e=function(o){return{length:function(){return o.length},save:function(t,e){!function(t,e){if(!t)throw new Error("`filepath` is required.");if(!e)throw new Error("`file` object is required.");if("string"!=typeof t)throw new Error("`filepath` must be a string.");if("object"!==w(e))throw new Error("`file` must be an object.")}(t,e);for(var n=0,r=this.length();n<r;){if(o[n][0]===t)return o[n][1]=Object.assign({},o[n][1],e);n++}o.push([t,e])},saveAll:function(t){for(var e=0,n=this.length();e<n;)o[e][1]=Object.assign({},o[e][1],t),e++},get:function(t){for(var e=0,n=this.length();e<n;){if(o[e][0]===t)return o[e][1];e++}},del:function(t){for(var e=0,n=this.length();e<n;){if(o[e][0]===t||o[e][1]===t)return void o.splice(e,1);e++}throw new Error("There is no file with path ".concat(t,"."))},getKey:function(t){for(var e=0,n=this.length();e<n;){if(o[e][1]===t)return o[e][0];e++}},rename:function(t,e){for(var n=0,r=this.length();n<r;){if(o[n][0]===t)return o[n][0]=e;n++}throw new Error("There is no file with path ".concat(key,"."))},clone:function(){return l(o)},replaceStorage:function(t){o=t},toObject:function(){return o.reduce(function(t,e){return t[e[0]]=e[1],t},{})}}},a=function(t){var r=s().patch_fromText(t);return r.reduce(function(t,e,n){return e.diffs&&(t+=e.diffs.reduce(function(t,e){var n=m(decodeURI(e[1])).replace(/\n/g,"<br />");return 1===e[0]&&(t+="<ins>"+n+"</ins>"),-1===e[0]&&(t+="<del>"+n+"</del>"),0===e[0]&&(t+="<span>"+n+"</span>"),t},""),n<r.length-1&&(t+="<hr />")),t},"")},g=function(t,e){return decodeURI(o(f(t),f(e)))},m=function(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;"};return t.replace(/[&<>]/g,function(t){return e[t]||t})},v=e(u.working),y=e(u.stage);return c.save=function(e,t){return"object"===w(e)&&void 0===t?(Object.keys(e).forEach(function(t){return v.save(t,e[t])}),d(c.ON_CHANGE),c):(v.save(e,t),d(c.ON_CHANGE),t)},c.saveAll=function(t){return v.saveAll(t),d(c.ON_CHANGE),c},c.discard=function(){return this.checkout(void 0,!0),c},c.del=function(t){return v.del(t),d(c.ON_CHANGE),c},c.rename=function(t,e){return v.rename(t,e),d(c.ON_CHANGE),u.working},c.get=function(t){return v.get(t)},c.exists=function(t){return!!v.get(t)},c.getAll=function(){return u.working},c.getFilepath=function(t){return v.getKey(t)},c.add=function(t){if(void 0===t)y.replaceStorage(u.stage=v.clone());else{var e=v.get(t);if(!e)throw new Error("There is no '".concat(t,"' in the working directory."));y.save(t,l(e))}return d(c.ON_ADD),c},c.commit=function(t,e){if(0===y.length())throw new Error("NOTHING_TO_COMMIT");var n="_"+ ++u.i,r=this.head(),o=null!==r?i(f(u.stage),r):f(u.stage);return u.commits[n]={message:t,parent:r,files:o},e&&(u.commits[n].meta=e),u.head=n,y.replaceStorage(u.stage=[]),d(c.ON_COMMIT),n},c.amend=function(n,r){if(void 0===n&&void 0===r&&null!==this.head)return this.amend(this.head(),{files:v.toObject()});var o=l(this.log()),t=Object.keys(o);if(0!==t.length){var e=p();return t.forEach(function(t){return o[t].files=h(e[t])}),t.forEach(function(t){var e=o[t];n===t&&(e.message=r.message?r.message:e.message,e.meta=r.meta?r.meta:e.meta,r.files&&(e.files=Object.keys(r.files).reduce(function(t,e){return t.push([e,r.files[e]]),t},[])))}),Object.keys(o).forEach(function(t){var e=o[t];null===e.parent?e._files=f(e.files):e._files=g(o[e.parent].files,e.files)}),Object.keys(o).forEach(function(t){o[t].files=o[t]._files,delete o[t]._files}),u.commits=o,d(c.ON_COMMIT),o[n]}},c.show=function(t){t=t||this.head();var e=c.log()[t];if(!e)throw new Error('There is no commit with hash "'.concat(t,'".'));var n=l(e);return n.files=h(r(t)),n},c.checkout=function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(!e&&0<y.length())throw new Error("UNCOMMITED_CHANGES");if(!e&&""!==i(f(u.working),this.head()))throw new Error("UNSTAGED_FILES");return void 0===t&&(t=this.head()),u.head=t,v.replaceStorage(u.working=h(r(t))),d(c.ON_CHECKOUT),c},c.staged=function(){return y},c.head=function(){return u.head},c.log=function(){return u.commits},c.logAsTree=function(){var r=l(u.commits);return function t(e){if(!e)return null;var n=r[e];return delete r[e],n.hash=e,n.derivatives=Object.keys(r).filter(function(t){return r[t].parent===e}).map(t),n}(Object.keys(r).find(function(t){return null===r[t].parent}))},c.rollOut=function(){var n=this.log(),r=p();return Object.keys(n).reduce(function(t,e){return t[e]={},t[e].message=n[e].message,t[e].parent=n[e].parent,n[e].meta&&(t[e].meta=n[e].meta),t[e].files=h(r[e]),t},{})},c.adios=function(n){var r=l(this.log()),t=r[n],e=Object.keys(r);if(0!==e.length){var o,i,a=r[n].parent,s=p();return e.forEach(function(t){return r[t].files=h(s[t])}),delete r[n],(e=Object.keys(r)).forEach(function(t){var e=r[t];e.parent===n&&null===(e.parent=a)&&(o?e.parent=o:o=t),null===e.parent?e._files=f(e.files):e._files=g(r[e.parent].files,e.files)}),e.forEach(function(t){r[t].files=r[t]._files,delete r[t]._files}),this.head()===n&&(i=r,0===Object.keys(i).length&&i.constructor===Object?u.head=null:this.checkout(null===a?Object.keys(r).shift():a)),u.commits=r,d(c.ON_COMMIT),t}},c.diff=function(){var t=i(f(u.working),this.head());return""===t?null:{text:t,html:a(t)}},c.export=function(){return l(u)},c.listen=function(t){n.push(t)},c.import=function(t){var e,n;return(u=t).head||(u.head=null),u.i||(u.i=u.head?parseInt(u.head.replace("_","")):0),u.stage||(u.stage=[]),u.working||(u.working=[],this.checkout(this.head(),!0)),u.commits||(u.commits={}),v.replaceStorage(u.working),y.replaceStorage(u.stage),e=u.commits,(n=Object.keys(u.commits).find(function(t){return null===e[t].parent&&e[t].files.match(/^\[/)}))&&Object.keys(u.commits).forEach(function(t){null===e[t].parent&&t!==n&&(e[t].parent=n)}),c},c.commitDiffToHTML=function(t){if(!u.commits[t])throw new Error("There is no commit with hash ".concat(t,"."));return-1===u.commits[t].files.indexOf("@@")?"":a(u.commits[t].files)},c.calcStrDiff=function(t,e){var n=o(t,e);return""===n?null:{text:n,html:a(n)}},c}})?r.apply(e,[]):r)||(t.exports=o)},function(t,e){function l(){return document.getElementById("svg-canvas")}function f(t,e,n,r){var o=l(),i=document.createElementNS("http://www.w3.org/2000/svg","circle");i.setAttributeNS(null,"cx",t),i.setAttributeNS(null,"cy",e),i.setAttributeNS(null,"r",n),i.setAttributeNS(null,"fill",r),o.appendChild(i)}t.exports={connectCommits:function(t,e,n){var r,o,i,a,s,c,u;f(t,e,3,"#999"),f(t,n,3,"#999"),o=e,i=r=t,a=n,s=l(),c=document.createElementNS("http://www.w3.org/2000/svg","path"),u="M "+r+" "+o+" C 40 "+(o+15)+" "+(i+15)+" "+a+" "+i+" "+a,c.setAttributeNS(null,"d",u),c.setAttributeNS(null,"fill","none"),c.setAttributeNS(null,"stroke","#999"),s.appendChild(c)},empty:function(){for(var t=l();t.firstChild;)t.removeChild(t.firstChild)}}},function(t){t.exports={name:"demoit",version:"7.3.0",description:"A live coding tool",main:"index.js",repository:{type:"git",url:"git+https://github.com/krasimir/demoit.git"},scripts:{clean:"shx rm -rf ./dist/*","copy-static":"shx cp ./src/index.html ./dist/index.html && shx cp ./src/sandbox.html ./dist/sandbox.html && shx cp -r ./src/resources ./dist && shx cp -r ./src/img ./dist","produce-minified-js":"uglifyjs ./src/js-vendor/split.js ./.tmp/demoit.js -c -m -o ./dist/demoit.js","produce-js":"shx cat ./src/js-vendor/split.js ./.tmp/demoit.js > ./dist/demoit.js","produce-css":"shx cat ./src/css/codemirror.css ./src/css/la.css ./src/css/styles.css ./src/css/light_theme.css ./src/css/dark_theme.css | uglifycss > ./dist/styles.css","produce-editor-js":"uglifyjs ./src/js-vendor/codemirror.js ./src/js-vendor/javascript.js ./src/js-vendor/xml.js ./src/js-vendor/jsx.js ./src/js-vendor/mark-selection.js ./src/js-vendor/matchbrackets.js ./src/js-vendor/comment.js ./src/js-vendor/search_cursor.js ./src/js-vendor/overlay.js ./src/js-vendor/markdown.js ./src/js-vendor/gfm.js ./src/js-vendor/runmode.js ./src/js-vendor/colorize.js ./src/js-vendor/closebrackets.js ./src/js-vendor/match-highlighter.js ./src/js-vendor/css.js ./src/js-vendor/htmlmixed.js ./src/js-vendor/deep-diff.js ./src/js-vendor/babel-6.26.0.min.js ./src/js-vendor/babel-polyfill@6.26.0.js ./src/js-vendor/babel-plugin-transform-es2015-modules-commonjs@6.26.2.js -c -m -o ./dist/resources/editor.js",dev:'yarn build && concurrently "webpack" "onchange ./src/css/*.css -- yarn produce-css" "onchange ./.tmp/*.js -- yarn produce-js" "cpx ./src/index.html ./dist/ -w" "cpx ./src/sandbox.html ./dist/ -w"',build:"yarn clean && yarn copy-static && yarn produce-css && yarn produce-editor-js && webpack --config ./webpack.config.prod.js && yarn produce-minified-js",zip:"node ./scripts/zipit.js",release:"yarn test && yarn build && yarn zip",test:"jest","test-watch":"jest --watch --verbose false",lint:"./node_modules/.bin/eslint --ext .js src/js"},keywords:["demo","code","live","coding"],author:"Krasimir Tsonev",license:"MIT",bugs:{url:"https://github.com/krasimir/demoit/issues"},homepage:"https://github.com/krasimir/demoit#readme",devDependencies:{"@babel/core":"7.1.5","@babel/plugin-transform-runtime":"7.1.0","@babel/preset-env":"7.1.5","@babel/runtime":"7.1.5","babel-core":"^7.0.0-bridge.0","babel-eslint":"8.0.3","babel-jest":"23.6.0","babel-loader":"8.0.4","clean-css-cli":"4.2.1",concurrently:"4.0.1",cpx:"1.5.0",eslint:"4.12.1",jest:"23.6.0",onchange:"5.1.3","regenerator-runtime":"0.13.1",shx:"^0.3.2","uglify-js":"3.4.9",uglifycss:"0.0.29",webpack:"4.25.1","webpack-cli":"3.1.2","zip-folder":"1.0.0"},dependencies:{gitfred:"7.2.0",hashids:"1.2.2",jszip:"3.1.5","layout-architect":"3.0.0"}}},function(t,e,n){"use strict";var r,o;"undefined"!=typeof self&&self,void 0===(o="function"==typeof(r=function(){return function(t,n,r){if(!t)throw new Error("Please provide a HTML element as first argument!");if(!n)throw new Error("Please provide a list of strings as a second argument!");var s,o=function(t){return document.createElement(t)},i=function(t,e,n){return t.setAttribute(e,n)},c=function(){var t=n.slice();if(!r)return t;var e=function e(n,t){return 0===t.elements.length?n.push(t.name):t.elements.forEach(function(t){return e(n,t)}),n}([],r);return t.filter(function(t){return-1===e.indexOf(t)})}(),e=o("DIV"),a=[],u=r||null;function l(t){return{name:t,elements:[]}}function f(e,t,n,r){return t.map(function(t){var e=o("A");return i(e,"data-op",t[0]),i(e,"href","javascript:void(0);"),i(e,"class",t[2]),e.innerHTML=t[1],e.item=n,e.parent=r,e}).forEach(function(t){return e.appendChild(t)})}function h(){var n;return p((n=o("DIV"),c.forEach(function(t){var e=o("A");i(e,"href","javascript:void(0);"),i(e,"data-op","select"),e.item=t,e.innerHTML='<svg width="10" height="10" viewBox="0 0 1792 1792"><path d="M1600 736v192q0 40-28 68t-68 28h-416v416q0 40-28 68t-68 28h-192q-40 0-68-28t-28-68v-416h-416q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h416v-416q0-40 28-68t68-28h192q40 0 68 28t28 68v416h416q40 0 68 28t28 68z"/></svg> '+t,n.appendChild(e)}),i(n,"class","la-selector"),n)),new Promise(function(n){s=function(t){var e=c.indexOf(t);-1<e&&c.splice(e,1),n(t)}})}function p(t){for(t=t||function e(n,t){var r=o("DIV");return i(r,"class","la-block"),0===n.elements.length?(r.innerHTML='<div class="la-name">'+n.name+"</div>",f(r,[["remove",'<svg width="14" height="14" viewBox="0 0 1792 1792"><path d="M1490 1322q0 40-28 68l-136 136q-28 28-68 28t-68-28l-294-294-294 294q-28 28-68 28t-68-28l-136-136q-28-28-28-68t28-68l294-294-294-294q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 294 294-294q28-28 68-28t68 28l136 136q28 28 28 68t-28 68l-294 294 294 294q28 28 28 68z"/></svg>',"la-remove"]],n,t)):(r.innerHTML='<div class="la-children" style="grid-template-'+("vertical"===n.direction?"rows":"columns")+": repeat("+n.elements.length+', 1fr);"></div>',n.elements.forEach(function(t){return r.querySelector(".la-children").appendChild(e(t,n))})),f(r,[["horizontal:left","","la-left"],["vertical:top","","la-top"],["vertical:bottom","","la-bottom"],["horizontal:right","","la-right"]],n,t),r}(u);e.firstChild;)e.removeChild(e.firstChild);e.appendChild(t)}function d(){a.forEach(function(t){return t(u)})}function g(){h().then(function(t){u=l(t),p(),d()})}return i(e,"class","la"),e.addEventListener("click",function(t){var n,r,o,e=t.target.getAttribute("data-op"),i=t.target.item,a=t.target.parent;if(e&&i)if("remove"===e)!function(t,e){if(!t)return u=null,-1===c.indexOf(e.name)&&c.push(e.name);var n=t.elements.findIndex(function(t){return t===e});-1<n&&(t.elements.splice(n,1),1===t.elements.length&&(0<t.elements[0].elements.length?(t.direction=t.elements[0].direction,t.elements=t.elements[0].elements):(t.name=t.elements[0].name,t.elements=[],delete t.direction)),c.push(e.name))}(a,i),u?p():g(),d();else if("select"===e)s(i);else{if(0===c.length)return;e=e.split(":"),(n=i,r=e[0],o="right"===e[1]||"bottom"===e[1]?"after":"before",h().then(function(t){return l(t)}).then(function(t){if(0===n.elements.length)n.direction=r,n.elements="after"===o?[l(n.name),t]:[t,l(n.name)],delete n.name;else{if(n.direction!==r){var e={direction:n.direction,elements:n.elements};n.elements="after"===o?[e,t]:[t,e]}else"after"===o?n.elements.push(t):n.elements=[t].concat(n.elements);n.direction=r}})).then(function(){p(),d()})}}),u?p():g(),t.appendChild(e),{onChange:function(t){a.push(t)},change:function(t){u=t,p()},get:function(){return u}}}})?r.apply(e,[]):r)||(t.exports=o)},function(t,e,n){var i=n(4)(),a=function(t){return t.reduce(function(t,e){return t[e[0]]=e[1].c,t},{})};t.exports=function(t,e){var n=[],r=a(t),o=a(e);return Object.keys(r).forEach(function(e){if(o.hasOwnProperty(e)){var t=i.calcStrDiff(r[e],o[e]);null!==t&&n.push(["E",e,t])}else n.push(["D",e,r[e]]),Object.keys(o).forEach(function(t){r[e]===o[t]&&(n.push(["R",e,t]),delete o[t])})}),Object.keys(o).forEach(function(t){r.hasOwnProperty(t)||n.push(["N",t,o[t]])}),n}},function(t,e,n){t.exports=n(16)},function(t,e,n){var r=function(){return this||"object"==typeof self&&self}()||Function("return this")(),o=r.regeneratorRuntime&&0<=Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime"),i=o&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,t.exports=n(11),o)r.regeneratorRuntime=i;else try{delete r.regeneratorRuntime}catch(t){r.regeneratorRuntime=void 0}},function(T,t){!function(t){"use strict";var c,e=Object.prototype,u=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",r=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag",a="object"==typeof T,s=t.regeneratorRuntime;if(s)a&&(T.exports=s);else{(s=t.regeneratorRuntime=a?T.exports:{}).wrap=b;var f="suspendedStart",h="suspendedYield",p="executing",d="completed",g={},l={};l[o]=function(){return this};var m=Object.getPrototypeOf,v=m&&m(m(M([])));v&&v!==e&&u.call(v,o)&&(l=v);var y=k.prototype=x.prototype=Object.create(l);_.prototype=y.constructor=k,k.constructor=_,k[i]=_.displayName="GeneratorFunction",s.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},s.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,k):(t.__proto__=k,i in t||(t[i]="GeneratorFunction")),t.prototype=Object.create(y),t},s.awrap=function(t){return{__await:t}},C(j.prototype),j.prototype[r]=function(){return this},s.AsyncIterator=j,s.async=function(t,e,n,r){var o=new j(b(t,e,n,r));return s.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},C(y),y[i]="Generator",y[o]=function(){return this},y.toString=function(){return"[object Generator]"},s.keys=function(n){var r=[];for(var t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},s.values=M,q.prototype={constructor:q,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&u.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=c)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return i.type="throw",i.arg=n,r.next=t,e&&(r.method="next",r.arg=c),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var o=this.tryEntries[e],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var a=u.call(o,"catchLoc"),s=u.call(o,"finallyLoc");if(a&&s){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:M(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=c),g}}}function b(t,e,n,r){var i,a,s,c,o=e&&e.prototype instanceof x?e:x,u=Object.create(o.prototype),l=new q(r||[]);return u._invoke=(i=t,a=n,s=l,c=f,function(t,e){if(c===p)throw new Error("Generator is already running");if(c===d){if("throw"===t)throw e;return A()}for(s.method=t,s.arg=e;;){var n=s.delegate;if(n){var r=E(n,s);if(r){if(r===g)continue;return r}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(c===f)throw c=d,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);c=p;var o=w(i,a,s);if("normal"===o.type){if(c=s.done?d:h,o.arg===g)continue;return{value:o.arg,done:s.done}}"throw"===o.type&&(c=d,s.method="throw",s.arg=o.arg)}}),u}function w(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function x(){}function _(){}function k(){}function C(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function j(c){var e;this._invoke=function(n,r){function t(){return new Promise(function(t,e){!function e(t,n,r,o){var i=w(c[t],c,n);if("throw"!==i.type){var a=i.arg,s=a.value;return s&&"object"==typeof s&&u.call(s,"__await")?Promise.resolve(s.__await).then(function(t){e("next",t,r,o)},function(t){e("throw",t,r,o)}):Promise.resolve(s).then(function(t){a.value=t,r(a)},function(t){return e("throw",t,r,o)})}o(i.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function E(t,e){var n=t.iterator[e.method];if(n===c){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=c,E(t,e),"throw"===e.method))return g;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var r=w(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,g;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=c),e.delegate=null,g):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,g)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function q(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function M(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(u.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=c,t.done=!0,t};return r.next=r}}return{next:A}}function A(){return{value:c,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e,n){"use strict";n.r(e);var r=n(0),v=n.n(r),o=n(1),y=n.n(o),i=n(6),u=[];function M(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document,n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],o=[],i="string"==typeof t?e.querySelector(t):t,a=!0;if(!i){if(a=!1,!n)throw new Error('Ops! There is no DOM element matching "'.concat(t,'" selector.'));i=document.createElement("div")}var s=function(t,e){i.addEventListener(t,e);var n=function(){return i.removeEventListener(t,e)};return o.push(n),n},c={e:i,found:function(){return a},content:function(t){return t?(o.forEach(function(t){return t()}),i.innerHTML=t,this.exports()):i.innerHTML},text:function(t){return t?i.innerText=t:i.innerText},appendChild:function(t){return i.appendChild(t),this},appendChildren:function(t){return t.forEach(function(t){return i.appendChild(t.e)}),this},css:function(t,e){return void 0!==e?(i.style[t]=e,this):i.style[t]},clearCSS:function(){return i.style={},this},prop:function(t,e){return void 0!==e?(i[t]=e,this):i[t]},attr:function(t,e){return void 0!==e?(i.setAttribute(t,e),this):i.getAttribute(t)},onClick:function(t){return s("click",t)},onKeyUp:function(t){return s("keyup",t)},onKeyDown:function(t){return s("keydown",t)},onMouseOver:function(t){return s("mouseover",t)},onMouseOut:function(t){return s("mouseout",t)},onMouseUp:function(t){return s("mouseup",t)},onRightClick:function(e){var t=function(t){t.preventDefault(),e()};i.addEventListener("contextmenu",t);var n=function(){return i.removeEventListener("oncontextmenu",t)};return o.push(n),n},onChange:function(t){i.addEventListener("change",function(){return t(i.value)});var e=function(){return i.removeEventListener("change",t)};return o.push(e),e},find:function(t){return M(t,i)},appendTo:function(t){t.e.appendChild(i)},exports:function(){return Array.prototype.slice.call(i.querySelectorAll("[data-export]")).map(function(t){return M(t,i)})},namedExports:function(){return this.exports().reduce(function(t,e){return t[e.attr("data-export")]=e,t},{})},detach:function(){i.parentNode&&i.parentNode.contains(i)&&i.parentNode.removeChild(i)},empty:function(){for(;i.firstChild;)i.removeChild(i.firstChild);return this},destroy:function(){o.forEach(function(t){return t()}),r||(this.empty(),this.detach())},scrollToBottom:function(){i.scrollTop=i.scrollHeight},selectOnClick:function(){var t=this.onClick(function(){i.select(),t()})}};return u.push(c),c}function a(t){return window.location.href.match(t)}M.fromString=function(t){var e=document.createElement("div");e.innerHTML=t;var n=Array.prototype.slice.call(e.childNodes).filter(function(t){return 1===t.nodeType});if(0<n.length)return M(n[0]);throw new Error("fromString accepts HTMl with a single parent.")},M.wrap=function(t){return M(document.createElement("div")).appendChildren(t)},M.fromTemplate=function(t){return M.fromString(document.querySelector(t).innerHTML)},M.withFallback=function(t){return M(t,document,!0)},M.withRelaxedCleanup=function(t){return M(t,document,!1,!0)},M.destroy=function(){u.forEach(function(t){return t.destroy()}),u=[]};var A=!(M.exists=function(t){return!!document.querySelector(t)}),E=a(/^https:\/\/poet.codes/)||a(/^http:\/\/localhost:8004/),s=a(/^http:\/\/localhost:8004/),c=s?"http://localhost:8004/api/demo":"https://poet.codes/api/demo",l=s?"http://localhost:8004/api/profile":"https://poet.codes/api/profile",b=["editor","HTML","console","story"];E&&b.push("story-preview");var w={elements:[{name:"editor",elements:[]},{elements:[{name:"HTML",elements:[]},{name:"console",elements:[]}],direction:"horizontal"}],direction:"vertical"},f=function(a){var t,e=M.withRelaxedCleanup(".app .layout"),n=M.withRelaxedCleanup("body");t=a.getEditorSettings().theme,M.withRelaxedCleanup(".app").attr("class","app "+t);var s,c=function n(r){return"string"==typeof r?("output"===r&&(r="HTML"),"log"===r&&(r="console"),{name:r,elements:[]}):(0<r.elements.length&&r.elements.forEach(function(t,e){return r.elements[e]=n(t)}),r)}(a.getEditorSettings().layout||w),r=M.fromTemplate("#template-html"),o=M.fromTemplate("#template-console"),i=M.fromTemplate("#template-editor"),u=M.fromTemplate("#template-story"),l=M.fromTemplate("#template-story-preview"),f=M.withFallback(".does-not-exists"),h={HTML:r,console:o,editor:i,story:u,"story-preview":l},p=[],d=[];e.empty().appendChildren(function n(e){var r=e.direction,t=e.elements,o=e.sizes,i=t.map(function(t){if(0<t.elements.length){var e=M.wrap(n(t));return e.attr("class","editor-section"),e}return p.push(t.name),h[t.name]?h[t.name]:f});return o&&o.length!==t.length&&(o=t.map(function(){return 100/t.length})),d.push(function(){return{b:e,split:Split(i.map(function(t){return t.e}),{sizes:o||(t=i,t.map(function(){return 100/t.length})),gutterSize:2,direction:r,onDragEnd:function(){s.forEach(function(t){var e=t.b,n=t.split;e.sizes=n.getSizes()}),a.updateThemeAndLayout(c)}})};var t}),"horizontal"===r&&i.map(function(t){return t.css("float","left")}),i}({elements:[c]})),-1===p.indexOf("HTML")&&(r.css("position","absolute"),r.css("width","10px"),r.css("height","10px"),r.css("overflow","hidden"),r.css("top","-100px"),r.css("left","-100px"),r.css("visibility","hidden"),r.css("display","none"),r.appendTo(n)),setTimeout(function(){return s=d.map(function(t){return t()})},1)},h=n(2),S=n.n(h),p={presets:["react",["es2015",{modules:!1}],"es2016","es2017","stage-0","stage-1","stage-2","stage-3"],plugins:["transform-es2015-modules-commonjs"]};function d(t){return Babel.transform(t,p).code}var g=function(t,e){var n=(t||"").split(/\./).pop().toLowerCase();return"css"===n||"scss"===n?e='window.executeCSS("'.concat(t,'", ').concat(JSON.stringify(e),");"):"html"===n?e='window.executeHTML("'.concat(t,'", ').concat(JSON.stringify(e),");"):"md"===n&&(e="window.executeMarkdown(".concat(JSON.stringify(e),");")),{filename:t,content:e}},m=function(t){var e=t.filename,n=t.content;return'\n  {\n    filename: "'.concat(e,'",\n    func: function (require, exports) {\n      ').concat(d(n),"\n    },\n    exports: {}\n  }\n")};function x(e,t){var o=[],i=0;try{var a=t.findIndex(function(t){return S()(t,1)[0]===e});return t.forEach(function(t){var e=S()(t,2),n=e[0],r=e[1];o.push(m(g(n,r.c))),!0===r.en&&(a=i),i+=1}),{code:d("\n      const imported = [];\n      const modules = [".concat(o.join(","),"];\n      const require = function(file) {\n        const module = modules.find(({ filename }) => filename === file);\n\n        if (!module) {\n          throw new Error('Can not find \"' + file + '\" file.');\n        }\n        imported.push(file);\n        module.func(require, module.exports);\n        return module.exports;\n      };\n\n      modules[index].func(require, modules[index].exports);\n    ")),entryPoint:a}}catch(e){return console.error(e),null}}function _(){var e,r,o,i,a,s=M.withFallback(".console"),c=!0,u=function(t){var e,n=document.createElement("div"),r=String(t);try{e=String(JSON.parse(r))}catch(t){e=r}n.innerHTML="<p>"+("string"!=typeof e?e:e.replace(/[&<>"']/g,function(t){return"&"+{"&":"amp","<":"lt",">":"gt",'"':"quot","'":"#39"}[t]+";"})).replace(/\\n/,"<br />")+"</p>",c&&(s.empty(),c=!1),s.appendChild(n),s.scrollToBottom()};return s.css("opacity",1),e=console.error,r=console.log,o=console.warn,i=console.info,a=console.clear,console.error=function(t){u(t.stack),e.apply(console,arguments)},console.log=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach(u),r.apply(console,e)},console.warn=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach(u),o.apply(console,e)},console.info=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach(u),i.apply(console,e)},console.clear=function(){s.content("");for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];a.apply(console,e)},{clearConsole:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";c=!0,s.empty().content(t)},addToConsole:u}}var k=0,C={},j='<div class="centered">&lt;div id="output" /&gt;</div>',O=function(i,e){return window.onmessage=function(t){t.data.marker?(A&&console.log("<-- "+t.data.marker),C[t.data.marker]&&(C[t.data.marker].done(),delete C[t.data.marker])):t.data.log&&e(t.data.log)},function(e,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,o=++k;return A&&console.log("Demoit -> op="+e+" markerId="+o),new Promise(function(t){C[r||o]={done:t,op:e,value:n},i.e.contentWindow&&i.e.contentWindow.postMessage({op:e,value:n,marker:o},"*")})}};function q(t,e){return T.apply(this,arguments)}function T(){return(T=y()(v.a.mark(function t(e,n){var r,o,i;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=M.withFallback(".output"),o=r.find("#sandbox"),i=O(o,n),t.abrupt("return",{setOutputHTML:function(){var t=y()(v.a.mark(function t(){var e,n=arguments;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=0<n.length&&void 0!==n[0]?n[0]:j,t.abrupt("return",i("html",e));case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),resetOutput:function(){var t=y()(v.a.mark(function t(){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i("reload",null,"loaded");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),loadDependenciesInOutput:function(){var t=y()(v.a.mark(function t(){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",i("dependencies",e.getDependencies()));case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),executeInOut:function(){var e=y()(v.a.mark(function t(e){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",i("code",e));case 1:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}()});case 4:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}var I,N={},L=function(t,e){if(N[t])return e();N[t]=!1;var n=document.createElement("script");return n.src=t,n.addEventListener("load",function(){N[t]=!0,e()}),document.body.appendChild(n),!0},z=function(t,e){if(N[t])return e();N[t]=!1;var n=document.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",t),n.addEventListener("load",function(){N[t]=!0,e()}),document.body.appendChild(n),!0},D=(I=y()(v.a.mark(function t(i){var a,e=arguments;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=1<e.length&&void 0!==e[1]?e[1]:function(){},t.abrupt("return",new Promise(function(o){!function t(e){if(e!==i.length){a(Math.ceil(e/i.length*100),i[e].split(/\//).pop());var n=i[e],r=n.split(".").pop().toLowerCase();"js"===r?L(n,function(){return t(e+1)}):"css"===r?z(n,function(){return t(e+1)}):t(e+1)}else o()}(0)}));case 2:case"end":return t.stop()}},t,this)})),function(t){return I.apply(this,arguments)}),B=function(){return N};function F(t){return P.apply(this,arguments)}function P(){return(P=y()(v.a.mark(function t(e){var n;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=["./resources/editor.js"],t.next=3,D(n,e);case 3:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}var R,H=function(u){var t=u.commands,l=u.Pos;t.selectNextOccurrence=function(t){var e=t.getCursor("from"),n=t.getCursor("to"),r=t.state.sublimeFindFullWord==t.doc.sel;if(0==u.cmpPos(e,n)){var o=wordAt(t,e);if(!o.word)return;t.setSelection(o.from,o.to),r=!0}else{var i=t.getRange(e,n),a=r?new RegExp("\\b"+i+"\\b"):i,s=t.getSearchCursor(a,n),c=s.findNext();if(c||(c=(s=t.getSearchCursor(a,l(t.firstLine(),0))).findNext()),!c||function(t,e,n){for(var r=0;r<t.length;r++)if(t[r].from()==e&&t[r].to()==n)return!0;return!1}(t.listSelections(),s.from(),s.to()))return u.Pass;t.addSelection(s.from(),s.to())}r&&(t.state.sublimeFindFullWord=t.doc.sel)},t.toggleCommentIndented=function(t){t.toggleComment({indent:!0})}},U=function(e,t){var n=t,r=[];return location.search.substr(1).split("&").forEach(function(t){(r=t.split("="))[0]===e&&(n=decodeURIComponent(r[1]))}),n},G=(R=y()(v.a.mark(function t(e){var n;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return n=t.sent,t.next=5,n.json();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}},t,this)})),function(t){return R.apply(this,arguments)}),J=function(t){var e=window.location.href.split("#")[1];history.pushState(null,null,"/e/".concat(t).concat(e?"#"+e:""))},V=function(t){var e=t.split(".");if(1===e.length)return e[0]+".1";if(2===e.length)return"".concat(e[0],".1.").concat(e[1]);var n=e.pop(),r=e.pop();return isNaN(parseInt(r,10))?"".concat(e.join("."),".").concat(r,".1.").concat(n):"".concat(e.join("."),".").concat(parseInt(r,10)+1,".").concat(n)},$=function(t,e){return t.length>e?t.substr(0,e)+"...":t};function K(t){var e="";t=t.toString();for(var n=0;n<t.length;n++){var r=3^t.charCodeAt(n);e+=String.fromCharCode(r)}return e}var W=function(t){return JSON.parse(JSON.stringify(t))},Y=function(){try{return window.self!==window.top}catch(t){return!0}},X="e_ON_SELECT",Z="e_ON_FILE_CHANGE",Q="e_ON_FILE_SAVE";function tt(t,e){return et.apply(this,arguments)}function et(){return(et=y()(v.a.mark(function t(n,r){var e,o,i,a,s,c,u,l,f,h,p,d,g;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return g=function(){return(g=y()(v.a.mark(function t(){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:o(),p.setValue(n.getActiveFileContent()),Y()||p.focus(),t.t0=n.getActiveFile().split(".").pop().toLowerCase(),t.next="css"===t.t0?6:"scss"===t.t0?8:"html"===t.t0?10:"md"===t.t0?12:14;break;case 6:case 8:return p.setOption("mode","css"),t.abrupt("break",16);case 10:return p.setOption("mode","htmlmixed"),t.abrupt("break",16);case 12:return p.setOption("mode",{name:"gfm",highlightFormatting:!0,emoji:!0,xml:!0}),t.abrupt("break",16);case 14:return p.setOption("mode","jsx"),t.abrupt("break",16);case 16:l();case 17:case"end":return t.stop()}},t,this)}))).apply(this,arguments)},d=function(){return g.apply(this,arguments)},e=_(),o=e.clearConsole,i=e.addToConsole,t.next=5,q(n,i);case 5:return a=t.sent,s=a.resetOutput,c=a.loadDependenciesInOutput,u=a.executeInOut,l=function(){var t=y()(v.a.mark(function t(){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s();case 2:return t.next=4,c();case 4:return o(),t.next=7,u(x(n.getActiveFile(),n.getFiles()));case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),f=function(){var e=y()(v.a.mark(function t(e){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:o(),n.editFile(n.getActiveFile(),{c:e}),r(Q,e,p),l();case 4:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),h=M.withFallback(".js-code-editor"),o('<div class="centered"><div class="spinner"></div></div>'),t.next=15,F();case 15:return p=nt(h.empty(),n.getEditorSettings(),n.getActiveFileContent(),f,function(){r(Z)},function(t){n.setActiveFileByIndex(t),d()},function(t){r(X,t,p)}),t.abrupt("return",{loadFileInEditor:d,save:function(){f(p.getValue()),p.focus()}});case 17:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}function nt(t,e,n,r,o,i,a){H(CodeMirror);var s=CodeMirror(t.e,{value:n||"",mode:"jsx",tabSize:2,lineNumbers:!1,autofocus:!1,foldGutter:!1,gutters:[],styleSelectedText:!0,matchBrackets:!0,autoCloseBrackets:!0,lineWrapping:!0,theme:e.theme,highlightSelectionMatches:{showToken:/\w/,annotateScrollbar:!0}}),c=function(){return r(s.getValue())};return s.on("change",function(t,e){"setValue"!==e.origin&&o(s.getValue())}),s.setOption("extraKeys",{"Ctrl-S":c,"Cmd-S":c,"Cmd-1":function(){return i(0)},"Cmd-2":function(){return i(1)},"Cmd-3":function(){return i(2)},"Cmd-4":function(){return i(3)},"Cmd-5":function(){return i(4)},"Cmd-6":function(){return i(5)},"Cmd-7":function(){return i(6)},"Cmd-8":function(){return i(7)},"Cmd-9":function(){return i(8)},"Ctrl-1":function(){return i(0)},"Ctrl-2":function(){return i(1)},"Ctrl-3":function(){return i(2)},"Ctrl-4":function(){return i(3)},"Ctrl-5":function(){return i(4)},"Ctrl-6":function(){return i(5)},"Ctrl-7":function(){return i(6)},"Ctrl-8":function(){return i(7)},"Ctrl-9":function(){return i(8)},"Cmd-D":"selectNextOccurrence","Ctrl-D":"selectNextOccurrence","Cmd-/":"toggleCommentIndented","Ctrl-/":"toggleCommentIndented"}),CodeMirror.normalizeKeyMap(),t.onMouseUp(function(){var t=s.getSelection();""!==t&&a(t)}),s}var rt,ot,it=n(4),at=n.n(it),st=!1,ct={saveDemo:(ot=y()(v.a.mark(function t(e,n,r){var o,i;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(st)return t.abrupt("return");t.next=2;break;case 2:return t.prev=2,st=!0,t.next=6,fetch(c,{method:"POST",body:JSON.stringify({state:e,a:r}),headers:{token:n}});case 6:return o=t.sent,t.next=9,o.json();case 9:if(i=t.sent,st=!1,!i.error){t.next=15;break}console.error(i.error),t.next=17;break;case 15:if(i.demoId)return t.abrupt("return",i.demoId);t.next=17;break;case 17:console.log(i),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(2),console.error(t.t0);case 23:case"end":return t.stop()}},t,this,[[2,20]])})),function(t,e,n){return ot.apply(this,arguments)}),getDemos:(rt=y()(v.a.mark(function t(e,n){var r,o;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(l+"/"+e,{headers:{token:n}});case 3:return r=t.sent,t.next=6,r.json();case 6:if(!(o=t.sent).error){t.next=11;break}console.error(o.error),t.next=16;break;case 11:if(o)return t.abrupt("return",o);t.next=15;break;case 15:console.log(o);case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),console.error(t.t0);case 21:case"end":return t.stop()}},t,this,[[0,18]])})),function(t,e){return rt.apply(this,arguments)})},ut=function(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch(t){return!1}}(),lt=function(t,e){if(!ut)return null;void 0!==e&&localStorage.setItem(t,JSON.stringify(e));var n=localStorage.getItem(t);try{if(n)return JSON.parse(n)}catch(e){console.error("There is some data in the local storage under the ".concat(t," key. However, it is not a valid JSON."))}return null},ft=at()(),ht="DEMOIT_PROFILE",pt={editor:{theme:"light",statusBar:!0,layout:w},dependencies:[],files:{working:[["code.js",{c:"document.querySelector('#output').innerHTML = 'Hello world';\n\nconsole.log('Hello world');"}]],head:null,i:0,stage:[],commits:{}}},dt=function(){return 0===ft.getAll().length?"untitled.js":ft.getAll()[0][0]},gt=function(){var t=location.hash.replace(/^#/,"");return""!==t&&ft.get(t)?t:dt()},mt="FILE_CHANGED";function vt(){return(vt=y()(v.a.mark(function t(e){var n,a,i,s,c,r,o,u,l;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=[],a=function(e){A&&console.log("state:onChange event="+e),n.forEach(function(t){return t(e)})},i=lt(ht),s=window.state){t.next=19;break}if(r=U("state"))return t.prev=7,t.next=10,G(r);t.next=18;break;case 10:s=t.sent,t.next=16;break;case 13:t.prev=13,t.t0=t.catch(7),console.error("Error reading ".concat(r));case 16:t.next=19;break;case 18:s=pt;case 19:return s.v=e,c=W(s),ft.import(s.files),ft.listen(function(t){t===ft.ON_COMMIT?(A&&console.log("state:git:commit event="+t),u("git.listen"),A&&console.log("state:git:checkout event="+t)):t===ft.ON_CHECKOUT&&(l.setActiveFileByIndex(0),u("git.listen")),a(t)}),o=gt(),u=function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){};if(A&&console.log("state:persist reason="+t),l.isForkable()){if(!e&&!l.isDemoOwner())return;var r,o=DeepDiff.diff(c,s);if(c=W(s),e)o="",delete s.owner,r=s;else{if(void 0===o||!o)return;o=K(JSON.stringify(o)),r={demoId:s.demoId,owner:s.owner}}ct.saveDemo(r,i.token,o).then(function(t){t&&t!==s.demoId&&(s.demoId=t,s.owner=i.id,J(t)),n()})}},l={getDemoId:function(){return s.demoId},getActiveFile:function(){return o},getActiveFileContent:function(){return ft.get(o).c},setActiveFile:function(t){return o=t,location.hash=t,a("setActiveFile"),t},setActiveFileByIndex:function(t){var e=ft.getAll()[t][0];e&&(this.setActiveFile(e),a(mt))},isCurrentFile:function(t){return o===t},isDemoOwner:function(){return s.owner&&i&&s.owner===i.id},getFiles:function(){return ft.getAll()},getNumOfFiles:function(){return ft.getAll().length},meta:function(t){if(t){var e=t.name,n=t.description,r=t.published,o=t.storyWithCode;return s.name=e,s.desc=n,s.published=!!r,s.storyWithCode=!!o,a("meta"),u("meta"),null}var i={name:s.name,description:s.desc,published:!!s.published,storyWithCode:!!s.storyWithCode};return s.demoId&&(i.id=s.demoId),i},getDependencies:function(){return s.dependencies},setDependencies:function(t){s.dependencies=t,u("setDependencies")},getEditorSettings:function(){return s.editor},editFile:function(t,e){ft.save(t,e),u("editFile")},renameFile:function(t,e){o===t&&this.setActiveFile(e),ft.rename(t,e),u("renameFile")},addNewFile:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"untitled.js";t=ft.get(t)?V(t):t,ft.save(t,{c:""}),this.setActiveFile(t),u("addNewFile")},deleteFile:function(t){ft.del(t),t===o&&this.setActiveFile(dt()),u("deleteFile")},listen:function(t){n.push(t)},removeListeners:function(){n=[]},updateThemeAndLayout:function(t,e){t&&(s.editor.layout=t),e&&(s.editor.theme=e),u("updateThemeAndLayout")},updateStatusBarVisibility:function(t){s.editor.statusBar!==t&&(s.editor.statusBar=t,u("updateStatusBarVisibility"))},setEntryPoint:function(t){var e=!ft.get(t).en;ft.saveAll({en:!1}),ft.save(t,{en:e}),u()},dump:function(){return s},isForkable:function(){return E&&l.loggedIn()},fork:function(){u("fork",!0,function(){return a("fork")})},loggedIn:function(){return null!==i},getProfile:function(){return i},getDemos:function(){return ct.getDemos(i.id,i.token)},version:function(){return s.v},git:function(){return ft},export:function(){return s},getStoryURL:function(){var t=this.meta(),e="story";return t&&t.name&&(e=t.name.toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,"")),"/s/".concat(this.getDemoId(),"/").concat(e)}},window.__state=l,t.abrupt("return",l);case 28:case"end":return t.stop()}},t,this,[[7,13]])}))).apply(this,arguments)}var yt=n(3),bt=n.n(yt),wt=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:20;return'<svg width="'.concat(t,'" height="').concat(t,'" viewBox="0 0 1792 1792"><path d="M704 1376v-704q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v704q0 14 9 23t23 9h64q14 0 23-9t9-23zm256 0v-704q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v704q0 14 9 23t23 9h64q14 0 23-9t9-23zm256 0v-704q0-14-9-23t-23-9h-64q-14 0-23 9t-9 23v704q0 14 9 23t23 9h64q14 0 23-9t9-23zm-544-992h448l-48-117q-7-9-17-11h-317q-10 2-17 11zm928 32v64q0 14-9 23t-23 9h-96v948q0 83-47 143.5t-113 60.5h-832q-66 0-113-58.5t-47-141.5v-952h-96q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h309l70-167q15-37 54-63t79-26h320q40 0 79 26t54 63l70 167h309q14 0 23 9t9 23z"/></svg>')},xt=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:20;return'<svg width="'.concat(t,'" height="').concat(t,'" viewBox="0 0 1792 1792"><path d="M1671 566q0 40-28 68l-724 724-136 136q-28 28-68 28t-68-28l-136-136-362-362q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 295 656-657q28-28 68-28t68 28l136 136q28 28 28 68z"/></svg>')},_t=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:24;return'<svg width="'.concat(t,'" height="').concat(t,'" viewBox="0 0 1792 1792"><path d="M1490 1322q0 40-28 68l-136 136q-28 28-68 28t-68-28l-294-294-294 294q-28 28-68 28t-68-28l-136-136q-28-28-28-68t28-68l294-294-294-294q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 294 294-294q28-28 68-28t68 28l136 136q28 28 28 68t-28 68l-294 294 294 294q28 28 28 68z"/></svg>')},kt=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:24;return'<svg width="'.concat(t,'" height="').concat(t,'" viewBox="0 0 1792 1792"><path d="M1600 736v192q0 40-28 68t-68 28h-416v416q0 40-28 68t-68 28h-192q-40 0-68-28t-28-68v-416h-416q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h416v-416q0-40 28-68t68-28h192q40 0 68 28t28 68v416h416q40 0 68 28t28 68z"/></svg>')},Ct=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:24;return'<svg width="'.concat(t,'" height="').concat(t,'" viewBox="0 0 1792 1792"><path d="M1152 896q0-106-75-181t-181-75-181 75-75 181 75 181 181 75 181-75 75-181zm512-109v222q0 12-8 23t-20 13l-185 28q-19 54-39 91 35 50 107 138 10 12 10 25t-9 23q-27 37-99 108t-94 71q-12 0-26-9l-138-108q-44 23-91 38-16 136-29 186-7 28-36 28h-222q-14 0-24.5-8.5t-11.5-21.5l-28-184q-49-16-90-37l-141 107q-10 9-25 9-14 0-25-11-126-114-165-168-7-10-7-23 0-12 8-23 15-21 51-66.5t54-70.5q-27-50-41-99l-183-27q-13-2-21-12.5t-8-23.5v-222q0-12 8-23t19-13l186-28q14-46 39-92-40-57-107-138-10-12-10-24 0-10 9-23 26-36 98.5-107.5t94.5-71.5q13 0 26 10l138 107q44-23 91-38 16-136 29-186 7-28 36-28h222q14 0 24.5 8.5t11.5 21.5l28 184q49 16 90 37l142-107q9-9 24-9 13 0 25 10 129 119 165 170 7 8 7 22 0 12-8 23-15 21-51 66.5t-54 70.5q26 50 41 98l183 28q13 2 21 12.5t8 23.5z"/></svg>')},jt=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:24;return'<svg width="'.concat(t,'" height="').concat(t,'" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1152 896q0 106-75 181t-181 75-181-75-75-181 75-181 181-75 181 75 75 181zm-256-544q-148 0-273 73t-198 198-73 273 73 273 198 198 273 73 273-73 198-198 73-273-73-273-198-198-273-73zm768 544q0 209-103 385.5t-279.5 279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5 385.5-103 385.5 103 279.5 279.5 103 385.5z"/></svg>')},Et=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:16,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:14;return'<svg width="'.concat(t,'" height="').concat(e,'" viewBox="0 0 2048 1792"><path d="M704 896q-159 0-271.5-112.5t-112.5-271.5 112.5-271.5 271.5-112.5 271.5 112.5 112.5 271.5-112.5 271.5-271.5 112.5zm1077 320l249 249q9 9 9 23 0 13-9 22l-136 136q-9 9-22 9-14 0-23-9l-249-249-249 249q-9 9-23 9-13 0-22-9l-136-136q-9-9-9-22 0-14 9-23l249-249-249-249q-9-9-9-23 0-13 9-22l136-136q9-9 22-9 14 0 23 9l249 249 249-249q9-9 23-9 13 0 22 9l136 136q9 9 9 22 0 14-9 23zm-498 0l-181 181q-37 37-37 91 0 53 37 90l83 83q-21 3-44 3h-874q-121 0-194-69t-73-190q0-53 3.5-103.5t14-109 26.5-108.5 43-97.5 62-81 85.5-53.5 111.5-20q19 0 39 17 154 122 319 122t319-122q20-17 39-17 28 0 57 6-28 27-41 50t-13 56q0 54 37 91z"/></svg>')},St=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:14;return'<svg width="'.concat(t,'" height="').concat(t,'" viewBox="0 0 1792 1792"><path d="M672 1472q0-40-28-68t-68-28-68 28-28 68 28 68 68 28 68-28 28-68zm0-1152q0-40-28-68t-68-28-68 28-28 68 28 68 68 28 68-28 28-68zm640 128q0-40-28-68t-68-28-68 28-28 68 28 68 68 28 68-28 28-68zm96 0q0 52-26 96.5t-70 69.5q-2 287-226 414-67 38-203 81-128 40-169.5 71t-41.5 100v26q44 25 70 69.5t26 96.5q0 80-56 136t-136 56-136-56-56-136q0-52 26-96.5t70-69.5v-820q-44-25-70-69.5t-26-96.5q0-80 56-136t136-56 136 56 56 136q0 52-26 96.5t-70 69.5v497q54-26 154-57 55-17 87.5-29.5t70.5-31 59-39.5 40.5-51 28-69.5 8.5-91.5q-44-25-70-69.5t-26-96.5q0-80 56-136t136-56 136 56 56 136z"/></svg>')},Ot=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:14;return'<svg width="'.concat(t,'" height="').concat(t,'" viewBox="0 0 1792 1792" ><path d="M1472 989v259q0 119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119 84.5-203.5t203.5-84.5h255q13 0 22.5 9.5t9.5 22.5q0 27-26 32-77 26-133 60-10 4-16 4h-112q-66 0-113 47t-47 113v832q0 66 47 113t113 47h832q66 0 113-47t47-113v-214q0-19 18-29 28-13 54-37 16-16 35-8 21 9 21 29zm237-496l-384 384q-18 19-45 19-12 0-25-5-39-17-39-59v-192h-160q-323 0-438 131-119 137-74 473 3 23-20 34-8 2-12 2-16 0-26-13-10-14-21-31t-39.5-68.5-49.5-99.5-38.5-114-17.5-122q0-49 3.5-91t14-90 28-88 47-81.5 68.5-74 94.5-61.5 124.5-48.5 159.5-30.5 196.5-11h160v-192q0-42 39-59 13-5 25-5 26 0 45 19l384 384q19 19 19 45t-19 45z"/></svg>')},qt=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:14;return'<svg width="'.concat(t,'" height="').concat(t,'" viewBox="0 0 1792 1792"><path d="M1664 1344v128q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45zm0-512v128q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45zm0-512v128q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45z"/></svg>')},Mt=27,At=function(t){var e=t.title,n=t.content;return"<section>\n  <h2>".concat(e,'</h2>\n  <button class="close" data-export="close"><svg width="20" height="20" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1490 1322q0 40-28 68l-136 136q-28 28-68 28t-68-28l-294-294-294 294q-28 28-68 28t-68-28l-136-136q-28-28-28-68t28-68l294-294-294-294q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 294 294-294q28-28 68-28t68 28l136 136q28 28 28 68t-28 68l-294 294 294 294q28 28 28 68z"/></svg></button>\n  ').concat(n,"\n</section>")},Tt=function(t,n){var e=t.buttons,r=t.content;return'<section class="multiple-pages">\n  <ul class="sub-nav">\n    '.concat(e.map(function(t,e){return'<li class="'.concat(e===n?"active":"",'"><a href="javascript:void(0);" data-export="page:').concat(e,'">').concat(t,"</a></li>")}).join(""),'\n  </ul>\n  <button class="close" data-export="close">').concat(_t(24),'</button>\n  <div class="content">').concat(r[n],"</div>\n</section>")};function It(r){var e=M.fromString('<div class="popup"></div>'),t=M.withRelaxedCleanup("body"),n=M.withRelaxedCleanup(".layout"),o=t.onKeyUp(function(t){return t.keyCode===Mt&&i()}),i=function(){o(),e.css("opacity",0),r.cleanUp&&r.cleanUp(),setTimeout(function(){return e.destroy()},200),n.css("filter","none")};n.css("filter","blur(2px)"),e.appendTo(t),function n(t){e.content(t).forEach(function(t){var e=t.attr("data-export");"close"===e?t.onClick(i):e.match(/^page/)&&t.onClick(function(){return n(Tt(r,Number(e.split(":").pop())))})}),r.onRender&&r.onRender(bt()({closePopup:i},e.namedExports()))}("buttons"in r?Tt(r,r.defaultTab):At(r)),setTimeout(function(){return e.css("opacity",1)},1)}var Nt=13;function Lt(s,c,u,l,f){It({title:"Edit",content:'\n      <input name="filename" data-export="filenameInput" value="'.concat(s,'"/>\n      <button class="save secondary" data-export="saveButton">').concat(xt(),'<span>Update</span></button>\n      <button class="save secondary" data-export="setAsEntryPointButton">').concat(jt(20),'<span>Entry point</span></button>\n      <button class="delete secondary right" data-export="deleteButton">').concat(wt(),"<span>Delete</span></button>\n    "),onRender:function(t){var e=t.filenameInput,n=t.saveButton,r=t.closePopup,o=t.deleteButton,i=t.setAsEntryPointButton,a=function(){""!==e.e.value&&l(e.e.value),r()};e.e.focus(),e.e.setSelectionRange(0,s.lastIndexOf(".")),e.onKeyUp(function(t){t.keyCode===Nt&&a()}),n.onClick(a),1<c?o.css("display","block"):o.css("display","none"),o.onClick(function(){return u(),r()}),i.onClick(function(){return f(),r()})}})}var zt=13;var Dt=n(7),Bt=n.n(Dt),Ft=function(t){return'<iframe src="'.concat(t,'" style="display: block; width:100%; height: 400px; border:0; overflow:hidden;" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-top-navigation-by-user-activation"></iframe>')},Pt="/poet.codes.zip";function Rt(t){return Ht.apply(this,arguments)}function Ht(){return(Ht=y()(v.a.mark(function t(e){var n,r=arguments;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=1<r.length&&void 0!==r[1]&&r[1],t.next=3,fetch(e);case 3:return t.t0=n?"blob":"text",t.next=6,t.sent[t.t0]();case 6:return t.t1=t.sent,t.t2=e,t.abrupt("return",{content:t.t1,url:t.t2});case 9:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}function Ut(){return Gt.apply(this,arguments)}function Gt(){return(Gt=y()(v.a.mark(function t(){var e;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=Object.keys(B()),t.next=3,Promise.all(e.filter(function(t){return t.match(/^(http|https)/)}).map(Rt));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}var Jt=function(t){return t.filter(function(t){return""!==t&&"\n"!==t})};function Vt(d,g,m){return function(t){return i=d,o=y()(v.a.mark(function t(e){var r,o;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.prop("disabled","disabled").prop("innerHTML","Please wait. Preparing the zip file."),t.prev=1,t.next=4,Ut();case 4:return r=t.sent,t.next=7,D(["./resources/jszip.min.js","./resources/FileSaver.min.js"]);case 7:return t.t0=JSZip,t.next=10,Rt(Pt,!0);case 10:return t.t1=t.sent.content,t.next=13,t.t0.loadAsync.call(t.t0,t.t1);case 13:o=t.sent,e.prop("disabled",!1).prop("innerHTML","Download poet.codes.zip"),e.onClick(y()(v.a.mark(function t(){var e,n;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.file("index.html").async("string");case 2:return e=t.sent,(n=W(i.dump())).dependencies=r.map(function(t){var e=t.content,n="./resources/"+t.url.split("/").pop();return o.file(n,e),n}),o.file("index.html",e.replace("var state = null;","var state = ".concat(JSON.stringify(n),";"))),t.t0=saveAs,t.next=9,o.generateAsync({type:"blob"});case 9:t.t1=t.sent,(0,t.t0)(t.t1,"poet.codes.zip");case 11:case"end":return t.stop()}},t,this)}))),t.next=22;break;case 18:t.prev=18,t.t2=t.catch(1),console.error(t.t2),e.prop("innerHTML","There is an error creating the zip file.");case 22:case"end":return t.stop()}},t,this,[[1,18]])})),l=function(t){return o.apply(this,arguments)},e=d.getEditorSettings(),f=Jt(d.getDependencies()).join("\n"),n=t,r=d.version(),h=e.layout,p=e.theme,new Promise(function(t){return It({defaultTab:n||0,buttons:["General","Dependencies","Export/Share","About"],content:['\n        <p>\n          Theme:\n          <select data-export="themePicker">\n            <option value="light">light</option>\n            <option value="dark">dark</option>\n          </select>\n        </p>\n        <p class="mt1">Layout:</p>\n        <div class="mb1" data-export="layoutArchitectContainer"></div>\n        <button class="save" data-export="saveGeneral">Save</button>\n      ','\n        <textarea class="dependencies-list" data-export="dependenciesTextarea"></textarea>\n        <p><small>(Separate your dependencies by a new line)</small></p>\n        <button class="save" data-export="saveDependenciesButton">Save</button>\n      ','\n        <h2>Embed</h2>\n        <textarea data-export="iframeTextarea">'.concat(Ft(window.location.href),"</textarea>\n        ").concat(E?'\n          <h2 class="mt1">Download/Offline mode</h2>\n          <p>The archive contains all the files that you need to run the app locally. Including your dependencies.</p>\n          <button class="save" data-export="downloadButton">Download zip file</button>':"","\n      "),"\n        <p>\n          v".concat(r,'<br />\n          On the web: <a href="https://poet.codes" target="_blank">Poet.Codes</a><br />\n          GitHub repo: <a href="https://github.com/krasimir/poet.codes.feedback/issues" target="_blank">github.com/krasimir/poet.codes.feedback</a>\n        </p>\n      ')],cleanUp:function(){t()},onRender:function(t){var n=t.closePopup,e=t.saveGeneral,r=t.dependenciesTextarea,o=t.saveDependenciesButton,i=t.themePicker,a=t.iframeTextarea,s=t.layoutArchitectContainer,c=t.downloadButton;if(s&&i){var u=Bt()(s.e,b,h);i.e.value=p||"light",e.onClick(function(){var t,e;t=i.e.value,e=u.get()||w,d.updateThemeAndLayout(e,t),g(),n()})}a&&a.selectOnClick(),c&&l(c),r&&o&&(r.prop("value",f),o.onClick(function(){var t;(t=r.prop("value").split(/\r?\n/))&&(d.setDependencies(t),m()),n()}))}})});var l,e,f,n,r,h,p,i,o}}var $t="6px",Kt="36px",Wt=function(t){return'<img src="'.concat(t.avatar,'"/>')},Yt=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"javascript:void(0)";return'<a data-export="'.concat(t,'" class="').concat(n,'" href="').concat(r,'">').concat(e,"</a>")},Xt=function(t,e){return Array(e).join(t)};function Zt(p,d,g,m,v,y,b){var w=M.withRelaxedCleanup(".status-bar"),x=M.withRelaxedCleanup(".app .layout"),_=M.withRelaxedCleanup(".status-bar-menu"),k=!!p.getEditorSettings().statusBar,t=!1,C=!1,j=function(){_.css("display",(t=!t)?"block":"none")},e=function(){var i=[],t=[],e=p.getFiles();i.push('<div data-export="buttons">'),e.forEach(function(t){var e=S()(t,2),n=e[0],r=e[1],o=p.isCurrentFile(n);i.push(Yt("file:"+n,"<span>".concat(n).concat(o&&C?"*":"","</span>"),"file".concat(o?" active":"").concat(r.en?" entry":"")))}),i.push(Yt("newFileButton",kt(14),"new-file")),i.push('\n      <div class="meta-and-status">\n        '.concat(p.meta().name?p.meta().name:"unnamed","\n        ").concat(p.loggedIn()&&!p.isDemoOwner()?'<span class="badge warning">not yours</span>':"","\n        ").concat(E?'<a href="'.concat(p.getStoryURL(),'" class="badge" target="blank">view Story</a>'):"","\n      </div>\n    ")),i.push(Yt("menuButton",qt(14))),i.push(Yt("closeButton",_t(14))),i.push("</div>"),E&&t.push(Yt("profileButton",p.loggedIn()?Wt(p.getProfile())+" Profile":Et()+" Log in","profile",p.loggedIn()?"/u/"+p.getProfile().id:"/login?did=".concat(p.getDemoId()))),E&&t.push(Yt("",kt(14)+" New story","","/new")),p.isForkable()&&t.push(Yt("forkButton",St(14)+" Fork")),E&&t.push(Yt("shareButton",Ot(14)+" Share/Embed")),p.isDemoOwner()&&t.push(Yt("nameButton",Ct(14)+" Story")),t.push(Yt("settingsButton",Ct(14)+" Editor")),p.isForkable()&&t.push(Yt("",Et()+" Log out","","/logout?r=e/".concat(p.getDemoId()))),w.content(i.join("")).forEach(function(t){if(0===t.attr("data-export").indexOf("file")){var e=t.attr("data-export").split(":").pop();t.onClick(function(){p.isCurrentFile(e)?C&&y():d(e)}),t.onRightClick(function(){return m(e)})}}),_.content(t.join(""));var n=w.namedExports(),r=n.newFileButton,o=n.closeButton,a=n.menuButton,s=_.namedExports(),c=s.forkButton,u=s.shareButton,l=s.nameButton,f=s.settingsButton,h=function(){var t=w.namedExports().buttons;t.css("display",k?"grid":"none"),t.css("gridTemplateColumns",[Xt("minmax(auto, 135px) ",p.getNumOfFiles()+1),"30px","1fr","30px","30px"].filter(function(t){return t}).join(" ")),w.css("height",k?Kt:$t),x.css("height","calc(100% - ".concat(k?Kt:$t,")")),p.updateStatusBarVisibility(k)};r&&r.onClick(g),u&&u.onClick(function(){return v(2),j()}),f&&f.onClick(function(){return v(),j()}),p.isDemoOwner()&&l&&l.onClick(function(){return b(),j()}),c&&c.onClick(function(){return p.fork(),j()}),a&&a.onClick(j),o.onClick(function(t){t.stopPropagation(),k=!1,h()}),w.onClick(function(){k||(k=!0,h())}),h()};return e(),p.listen(e),function(t){C=t,e()}}var Qt=n(8),te=n.n(Qt),ee=n(5);function ne(t,e,i){It({title:t,content:'\n      <p class="mb3">'.concat(e,'</p>\n      <button class="save secondary" data-export="yesButton">').concat(xt(),'<span>Yes</span></button>\n      <button class="save secondary right" data-export="noButton">').concat(_t(),"<span>No</span></button>\n    "),onRender:function(t){var e=t.yesButton,n=t.noButton,r=t.closePopup,o=function(t){i(t),r()};e.onClick(function(){return o(!0)}),n.onClick(function(){return o(!1)})}})}var re=4,oe=25;function ie(x,_){var k,C=M.withFallback(".story"),j=x.git(),E=null,S=!1,O=function(t){return j.amend(k,{message:t})},q=function(t){S=!1,E=null,""===t&&j.amend(k,{message:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Date,e=t.getDate(),n=t.getMonth(),r=t.getFullYear().toString().substr(-2);return e+" "+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][n]+" "+r+" "+t.getHours()+":"+t.getMinutes()}()}),e()};if(!C.found())return function(){};var e=function n(){A&&console.log("story:render");var u,t,l,f,e,r,o=j.log(),c=Object.keys(o).map(function(t){return{hash:t,message:o[t].message,position:o[t].meta&&parseInt(o[t].meta.position,10)||null}}).sort(function(t,e){return null!==t.position&&null!==e.position?t.position-e.position:null!==t.position&&null===e.position?-1:null===t.position&&null!==e.position?1:t.hash-e.hash}),h=c.length,i=te()(0<h?j.show().files:[],j.getAll()),a=(u=j,l=S,f=k,0===(t=c).length?"":t.map(function(t){var e,n=t.hash,r=t.message,o=t.position,i=o&&0<o?'<span class="current-position">'.concat(o,"</span>"):"",a=ue(r),s=u.head()===n,c="";return c+='\n      <div class="commit '.concat(s?"commit-head":"",'" id="c').concat(n,'">\n        <a href="javascript:void(0);" data-export="checkoutLink" data-commit-hash="').concat(n,'" class="checkout">\n          ').concat(i,'<span class="commit-message-text">').concat(a,'</span>\n        </a>\n        <a href="javascript:void(0);" data-export="editMessage" data-commit-hash="').concat(n,'" class="edit">').concat(Ct(12)," teach</a>\n      </div>\n    "),f===n&&l&&(c+='\n        <div class="commit commit-edit" id="c'.concat(n,'">\n          <div class="story-form">\n            <div class="story-form-bar">\n              <a href="javascript:void(0);" data-export="confirmButton">').concat(xt(12),' save</a>\n              <a href="javascript:void(0);" data-export="closeButton">').concat(_t(12)," cancel</a>\n              ").concat(u.head()!==n?'<a href="javascript:void(0);" data-export="checkoutLink" data-commit-hash="'.concat(n,'">').concat(jt(12)," checkout</a>"):"",'\n              <a href="javascript:void(0);" data-export="deleteCommit" data-commit-hash="').concat(n,'" data-commit-message="').concat(a,'">').concat(wt(12),' delete</a>\n              <select data-export="publishStatus">\n                ').concat(function(t,e){var n=u.log(),r=n[e].meta,o=r?parseInt(r.position,10):0,i=[];i.push('<option value="0"'.concat(0===o?'selected="selected"':"",">not in story</option>"));for(var a=1;a<Object.keys(n).length+1;a++)i.push('<option value="'.concat(a,'" ').concat(o===a?'selected="selected"':"",">position #").concat(a,"</option>"));return i.join("")}(0,n),'\n              </select>\n              <select data-export="injector">\n                <option value="">inject</option>\n                <option value="{inject:all}">All files</option>\n                ').concat((e=n,u.show(e).files.map(function(t){return'<option value="{inject:'.concat(t[0],'}">').concat(t[0],"</option>")})),'\n              </select>\n            </div>\n            <div data-export="messageArea" class="message-area" spellcheck="true"></div>\n          </div>\n        </div>\n      ')),c}).join(""));C.attr("class",h<=1?"editor-section story no-graph":"editor-section story"),C.content("\n      ".concat(""!==a?'<div data-export="list">'+a+"</div>":"","\n      ").concat((e=j,r=i,0===r.length?'\n      <div class="working-directory">\n        <div class="clear commit-buttons-nav">\n          <a href="javascript:void(0)" data-export="addButton" class="commit-button left">\n            &#10004; New commit\n          </a>\n        </div>\n      </div>\n    ':'\n    <div class="working-directory">\n      <div class="diffs">\n        '.concat(r.map(ae).join(""),'\n      </div>\n      <div class="clear commit-buttons-nav">\n        ').concat(null!==e.head()?'<a href="javascript:void(0)" data-export="editButton" class="commit-button left">\n          &#10004; Save\n        </a>':"",'\n        <a href="javascript:void(0)" data-export="addButton" class="commit-button left">\n          &#10004; New commit\n        </a>\n        ').concat(0<e.getAll().length&&null!==e.head()?'<a href="javascript:void(0)" data-export="discardButton" class="commit-button right">\n            &#10006; Discard changes\n          </a>':"","\n      </div>\n    </div>\n  ")),'\n      <div class="story-arrows"><svg id="svg-canvas" width="32px" height="98%"></svg></div>\n    ')).forEach(function(e){"checkoutLink"===e.attr("data-export")&&e.onClick(function(){0<i.length?ne("Checkout","You are about to checkout another commit. You have an unstaged changes. Are you sure?",function(t){t&&(j.checkout(e.attr("data-commit-hash"),!0),_(),n())}):(j.checkout(e.attr("data-commit-hash")),_(),n())}),"editMessage"===e.attr("data-export")&&e.onClick(function(){S=!0,k=e.attr("data-commit-hash"),n()}),"deleteCommit"===e.attr("data-export")&&e.onClick(function(){ne("Deleting a commit",'Deleting "'.concat(e.attr("data-commit-message"),'" commit. Are you sure?'),function(t){t&&(S=!1,j.adios(e.attr("data-commit-hash")))})})});var s=C.namedExports(),p=s.editButton,d=s.addButton,g=s.discardButton,m=s.messageArea,v=s.confirmButton,y=s.closeButton,b=s.publishStatus,w=s.injector;p&&p.onClick(function(){j.amend(),n()}),d&&d.onClick(function(){S=!0,j.add(),k=j.commit(""),n()}),g&&g.onClick(function(){ne("Discard changes","You are about to discard your current changes. Are you sure?",function(t){t&&(j.discard(),_())})}),m&&(E=function(t,e,n,r,o,i){H(CodeMirror);var a=CodeMirror(t.e,bt()({value:n||"",mode:"gfm",tabSize:2,lineNumbers:!1,autofocus:!0,foldGutter:!1,gutters:[],styleSelectedText:!0,lineWrapping:!0,highlightFormatting:!0},e)),s=function(){return t=a.getValue(),v.css("opacity","0.3"),O(t),void M.withFallback('[data-commit-hash="'.concat(k,'"] > .commit-message-text')).text(ue(t));var t};return a.on("change",function(){return a.getValue(),v.css("opacity","1"),void(1<h&&se(c,j.logAsTree()))}),a.setOption("extraKeys",{"Ctrl-S":s,"Cmd-S":s,Esc:function(){return i(a.getValue())},"Ctrl-Enter":function(){return s(),i(a.getValue())},"Cmd-Enter":function(){return s(),i(a.getValue())}}),CodeMirror.normalizeKeyMap(),setTimeout(function(){return a.focus()},50),a}(m,x.getEditorSettings(),j.show(k).message,0,0,q),v.css("opacity","0.3"),v.onClick(function(){O(E.getValue()),S=!1,E=null,n()}),y.onClick(function(){S=!1,E=null,n()}),b.onChange(function(t){j.amend(k,{message:j.show(k).message,meta:{position:t}}),n()}),w.onChange(function(t){setTimeout(function(){E.focus(),E.refresh(),E.replaceSelection(t),w.e.value=""},1)})),1<h&&se(c,j.logAsTree())};return x.listen(function(t){S||e()}),e(),function(t,e){S&&E&&(e.setCursor({line:0,ch:0}),setTimeout(function(){E.focus(),E.refresh(),E.replaceSelection(t)},1))}}function ae(t){var e="",n="";switch(t[0]){case"E":e="edit",n=t[2].html;break;case"N":e="new";break;case"D":e="deleted";break;case"R":e="renamed",n=t[2]}return'\n    <div class="diff">\n      <div><span class="label label-'.concat(t[0],'">').concat(e,'</span></div>\n      <div class="diffA">').concat(t[1],'</div>\n      <div class="diffB">').concat(n,"</div>\n    </div>\n  ")}function se(n,r){setTimeout(function(){Object(ee.empty)(),A&&console.log(JSON.stringify(n.map(function(t){return{hash:t.hash,position:t.position}}),null,2));var t=function e(n,t){var r=t.parent,o=t.hash,i=t.derivatives,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{commitsYs:{},connections:[]};return a.commitsYs[o]=ce(o)-n,null!==r&&a.connections.push([r,o]),0<i.length&&i.forEach(function(t){return e(n,t,a)}),a}(ce(n[0].hash),r),e=t.connections,o=t.commitsYs;e.forEach(function(t){var e=S()(t,2),n=e[0],r=e[1];return Object(ee.connectCommits)(re,oe+o[n],oe+o[r])})},30)}function ce(t){return M.exists("#c"+t)?M("#c"+t).e.getBoundingClientRect().top+.3:0}function ue(t){return function(t,e){(e=e||{}).listUnicodeChar=!!e.hasOwnProperty("listUnicodeChar")&&e.listUnicodeChar,e.stripListLeaders=!e.hasOwnProperty("stripListLeaders")||e.stripListLeaders,e.gfm=!e.hasOwnProperty("gfm")||e.gfm,e.useImgAltText=!e.hasOwnProperty("useImgAltText")||e.useImgAltText;var n=t||"";n=n.replace(/^(-\s*?|\*\s*?|_\s*?){3,}\s*$/gm,"");try{e.stripListLeaders&&(n=e.listUnicodeChar?n.replace(/^([\s\t]*)([\*\-\+]|\d+\.)\s+/gm,e.listUnicodeChar+" $1"):n.replace(/^([\s\t]*)([\*\-\+]|\d+\.)\s+/gm,"$1")),e.gfm&&(n=n.replace(/\n={2,}/g,"\n").replace(/~{3}.*\n/g,"").replace(/~~/g,"").replace(/`{3}.*\n/g,"")),n=n.replace(/<[^>]*>/g,"").replace(/^[=\-]{2,}\s*$/g,"").replace(/\[\^.+?\](\: .*?$)?/g,"").replace(/\s{0,2}\[.*?\]: .*?$/g,"").replace(/\!\[(.*?)\][\[\(].*?[\]\)]/g,e.useImgAltText?"$1":"").replace(/\[(.*?)\][\[\(].*?[\]\)]/g,"$1").replace(/^\s{0,3}>\s?/g,"").replace(/^\s{1,2}\[(.*?)\]: (\S+)( ".*?")?\s*$/g,"").replace(/^(\n)?\s{0,}#{1,6}\s+| {0,}(\n)?\s{0,}#{0,} {0,}(\n)?\s{0,}$/gm,"$1$2$3").replace(/([\*_]{1,3})(\S.*?\S{0,1})\1/g,"$2").replace(/([\*_]{1,3})(\S.*?\S{0,1})\1/g,"$2").replace(/(`{3,})(.*?)\1/gm,"$2").replace(/`(.+?)`/g,"$1").replace(/\n{2,}/g,"\n\n")}catch(e){return console.error(e),t}return n}($(t.split("\n").shift(),36))}var le=function(t){if(M.exists("#preview")){var e=M.withFallback("#preview"),n=t.git(),r=t.getDemoId(),o=function(t,e){null!==n.head()&&(t.prop("value",JSON.stringify(n.show())),e.e.submit())};e.content('\n    <form data-export="form" action="/e/'.concat(t.getDemoId(),'/story.local" target="frame').concat(r,'" method="post">\n      <input type="hidden" data-export="input" name="message"/>\n    </form>\n    <iframe name="frame').concat(r,'" src="" style="display: block; width:100%; height: 100%; border:0; overflow:hidden;" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin allow-top-navigation-by-user-activation"/>\n  '));var i=e.namedExports(),a=i.form,s=i.input;t.listen(function(t){o(s,a)}),o(s,a)}};(function(t){return vt.apply(this,arguments)})(i.version).then(function(s){function c(){return t.apply(this,arguments)}function t(){return(t=y()(v.a.mark(function t(){var r,o,e,n,i,a;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return f(s),r=function(){},o=ie(s,function(){return n()}),t.next=5,tt(s,function(t,e,n){switch(A&&console.log("editor event="+t),t){case X:o(e,n);break;case Z:r(!0);break;case Q:r(!1)}});case 5:e=t.sent,n=e.loadFileInEditor,i=e.save,le(s),n(),a=Vt(s,function(){s.removeListeners(),M.destroy(),c()},function(){return n()}),r=Zt(s,function(t){s.setActiveFile(t),n()},function(){var t=y()(v.a.mark(function t(){var e;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise(function(i){return It({title:"New file",content:'\n      <input name="filename" data-export="filenameInput" placeholder="untitled.js"/>\n      <button class="save secondary" data-export="saveButton">'.concat(xt(),"<span>Create</span></button>\n    "),cleanUp:function(){i()},onRender:function(t){var e=t.filenameInput,n=t.saveButton,r=t.closePopup,o=function(){""!==e.e.value&&i(e.e.value),r()};e.e.focus(),e.onKeyUp(function(t){13===t.keyCode&&o()}),n.onClick(o)}})});case 2:(e=t.sent)&&(s.addNewFile(e),n());case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),function(){var e=y()(v.a.mark(function t(e){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Lt(e,s.getNumOfFiles(),function(){s.deleteFile(e),n()},function(t){s.renameFile(e,t),n()},function(){s.setEntryPoint(e),n()});case 1:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),a,i,function(){var t,c,u,e,n,r,o;t=s.meta(),c=function(t){return s.meta(t)},u=t.name,e=t.id,n=t.description,r=t.published,o=t.storyWithCode,It({title:"Edit story name",content:'\n      <input data-export="nameInput" value="'.concat(u=u||"",'" placeholder="Name"/>\n      <textarea placeholder="Description" data-export="descriptionInput">').concat(n||"",'</textarea>\n      <label>\n        <input type="checkbox" data-export="publishCheckbox" ').concat(r?'checked="checked"':"",'/> Publish as a story at <a href="/e/').concat(e,'/story" target="_blank">/e/').concat(e,'/story</a>\n      </label>\n      <label>\n        <input type="checkbox" data-export="withCode" ').concat(o?'checked="checked"':"",'/> Add the editor at the end of the story\n      </label>\n      <button class="save secondary" data-export="saveButton">').concat(xt(),"<span>Update</span></button>\n    "),onRender:function(t){var e=t.nameInput,n=t.descriptionInput,r=t.publishCheckbox,o=t.saveButton,i=t.closePopup,a=t.withCode,s=function(){""!==e.e.value&&c({name:e.e.value,description:n.e.value,published:r.e.checked,storyWithCode:a.e.checked}),i()};e.e.focus(),e.e.setSelectionRange(0,u.lastIndexOf(".")),e.onKeyUp(function(t){t.keyCode===zt&&s()}),o.onClick(s)}})});case 12:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}c()})}]);